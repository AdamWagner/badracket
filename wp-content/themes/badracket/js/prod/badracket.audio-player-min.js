function updateView(e){return function(e,t){br_state.viewSet(t)}}function doMoreStuff(){console.log("do more stuff ran");var e=br_player.history.album.random(),t=br_player.albumData.sampleSong(e);br_player.history.update(e,t);br_player.ui.render.init(e,t);br_player.ui.bindui.album();br_player.ui.bindui.song();br_player.ui.bindui.slider();br_player.ui.bindui.play();br_player.ui.bindui.next();br_player.ui.bindui.buyAlbum();br_player.ui.bindui.buyAlbumDetail();br_player.ui.bindui.buyAlbumHover();br_player.ui.bindui.previous()}(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();if("area"===u){r=t.parentNode;i=r.name;if(!t.href||!i||r.nodeName.toLowerCase()!=="map")return!1;o=e("img[usemap=#"+i+"]")[0];return!!o&&s(o)}return(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus();n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}});e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}});e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight;e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});e.support.minHeight=n.offsetHeight===100;e.support.selectstart="onselectstart"in n;t.removeChild(n).style.display="none"});e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0;r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0);s&&(n-=parseFloat(e.css(t,"margin"+this))||0)});return n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})};e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}});e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData));(function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1;e.ui.ie6=parseFloat(t[1],10)===6})();e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r){s.plugins[i]=s.plugins[i]||[];s.plugins[i].push([n,r[i]])}},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;if(t[r]>0)return!0;t[r]=1;i=t[r]>0;t[r]=0;return i},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)};e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1];i=a+"-"+t;if(!r){r=n;n=e.Widget}e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)};e[a]=e[a]||{};s=e[a][t];o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)};e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]});u=new n;u.options=e.widget.extend({},u.options);e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;this._super=e;this._superApply=r;s=i.apply(this,arguments);this._super=t;this._superApply=n;return s}}())});o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i});if(s){e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)});delete s._childConstructors}else n._childConstructors.push(o);e.widget.bridge(t,o)};e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s]){a=i[s][u];i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a)}return n};e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o;u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t){f=r&&r.jquery?f.pushStack(r.get()):r;return!1}}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))});return f}};e.Widget=function(){};e.Widget._childConstructors=[];e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0];this.element=e(r);this.uuid=n++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=e.widget.extend({},this.options,this._getCreateOptions(),t);this.bindings=e();this.hoverable=e();this.focusable=e();if(r!==this){e.data(r,this.widgetName,this);e.data(r,this.widgetFullName,this);this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}});this.document=e(r.style?r.ownerDocument:r.document||r);this.window=e(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={};s=n.split(".");n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++){o[s[u]]=o[s[u]]||{};o=o[s[u]]}n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}this._setOptions(i);return this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){this.options[e]=t;if(e==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;if(typeof t!="boolean"){r=n;n=t;t=!1}if(!r){r=n;n=this.element;i=this.widget()}else{n=i=e(n);this.bindings=this.bindings.add(n)}e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{};n=e.Event(n);n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase();n.target=this.element[0];s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);this.element.trigger(n,r);return!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}};e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{};typeof i=="number"&&(i={duration:i});o=!e.isEmptyObject(i);i.complete=s;i.delay&&r.delay(i.delay);o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t]();s&&s.call(r[0]);n()})}});e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(e){n=!1});e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent")){e.removeData(n.target,t.widgetName+".preventClickEvent");n.stopImmediatePropagation();return!1}});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t);this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted){t.preventDefault();return!0}}!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(e){return r._mouseMove(e)};this._mouseUpDelegate=function(e){return r._mouseUp(e)};e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);t.preventDefault();n=!0;return!0},_mouseMove:function(t){if(!e.ui.ie||document.documentMode>=9||!!t.button){if(this._mouseStarted){this._mouseDrag(t);return t.preventDefault()}if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1;this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)}return!this._mouseStarted}return this._mouseUp(t)},_mouseUp:function(t){e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=!1;t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0);this._mouseStop(t)}return!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})})(jQuery);(function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,r,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",u=[];this._keySliding=!1;this._mouseSliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":""));this.range=e([]);if(i.range){if(i.range===!0){i.values||(i.values=[this._valueMin(),this._valueMin()]);i.values.length&&i.values.length!==2&&(i.values=[i.values[0],i.values[0]])}this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(i.range==="min"||i.range==="max"?" ui-slider-range-"+i.range:""))}r=i.values&&i.values.length||1;for(t=s.length;t<r;t++)u.push(o);this.handles=s.add(e(u.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){i.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){if(!i.disabled){e(".ui-slider .ui-state-focus").removeClass("ui-state-focus");e(this).addClass("ui-state-focus")}else e(this).blur()}).blur(function(){e(this).removeClass("ui-state-focus")});this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)});this._on(this.handles,{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0;e(t.target).addClass("ui-state-active");r=this._start(t,u);if(r===!1)return}}o=this.options.step;this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=!1;this._stop(t,n);this._change(t,n);e(t.target).removeClass("ui-state-active")}}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;if(c.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();n={x:t.pageX,y:t.pageY};r=this._normValueFromMouse(n);i=this._valueMax()-this._valueMin()+1;this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n){i=n;s=e(this);o=t}});if(c.range===!0&&this.values(1)===c.min){o+=1;s=e(this.handles[o])}u=this._start(t,o);if(u===!1)return!1;this._mouseSliding=!0;this._handleIndex=o;s.addClass("ui-state-active").focus();a=s.offset();f=!e(t.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)};this.handles.hasClass("ui-state-hover")||this._slide(t,o,r);this._animateOff=!0;return!0},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);this._slide(e,this._handleIndex,n);return!1},_mouseStop:function(e){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(e,this._handleIndex);this._change(e,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=!1;return!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;if(this.orientation==="horizontal"){t=this.elementSize.width;n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{t=this.elementSize.height;n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}r=n/t;r>1&&(r=1);r<0&&(r=0);this.orientation==="vertical"&&(r=1-r);i=this._valueMax()-this._valueMin();s=this._valueMin()+r*i;return this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};if(this.options.values&&this.options.values.length){n.value=this.values(t);n.values=this.values()}return this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;if(this.options.values&&this.options.values.length){r=this.values(t?0:1);this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r);if(n!==this.values(t)){i=this.values();i[t]=n;s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i});r=this.values(t?0:1);s!==!1&&this.values(t,n,!0)}}else if(n!==this.value()){s=this._trigger("slide",e,{handle:this.handles[t],value:n});s!==!1&&this.value(n)}},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};if(this.options.values&&this.options.values.length){n.value=this.values(t);n.values=this.values()}this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};if(this.options.values&&this.options.values.length){n.value=this.values(t);n.values=this.values()}this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e);this._refreshValue();this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n);this._refreshValue();this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values;i=arguments[0];for(s=0;s<r.length;s+=1){r[s]=this._trimAlignValue(i[s]);this._change(null,s)}this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length);e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":if(n){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.prop("disabled",!0);this.element.addClass("ui-disabled")}else{this.handles.prop("disabled",!1);this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case"values":this._animateOff=!0;this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0;this._refreshValue();this._animateOff=!1}},_value:function(){var e=this.options.value;e=this._trimAlignValue(e);return e},_values:function(e){var t,n,r;if(arguments.length){t=this.options.values[e];t=this._trimAlignValue(t);return t}n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;Math.abs(n)*2>=t&&(r+=n>0?t:-t);return parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};if(this.options.values&&this.options.values.length)this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100;l[a.orientation==="horizontal"?"left":"bottom"]=n+"%";e(this).stop(1,1)[f?"animate":"css"](l,u.animate);if(a.options.range===!0)if(a.orientation==="horizontal"){r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate);r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})}else{r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate);r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate})}t=n});else{r=this.value();i=this._valueMin();s=this._valueMax();n=s!==i?(r-i)/(s-i)*100:0;l[this.orientation==="horizontal"?"left":"bottom"]=n+"%";this.handle.stop(1,1)[f?"animate":"css"](l,u.animate);o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate);o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate});o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate);o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate})}}})})(jQuery);(function(e,t){"use strict";function r(n,r){function cn(e){return s.preferFlash&&Ht&&!s.ignoreFlash&&s.flash[e]!==t&&s.flash[e]}function hn(e){return function(t){var n=this._s,r;!n||!n._a?r=null:r=e.call(this,t);return r}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1,idPrefix:"sound"};this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100};this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}};this.movieID="sm2-container";this.id=r||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20130512";this.version=null;this.movieURL=null;this.altURL=null;this.swfLoaded=!1;this.enabled=!1;this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=!1;this.didFlashBlock=!1;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1};this.sandbox={};this.html5={usingFlash:null};this.flash={};this.html5Only=!1;this.ignoreFlash=!1;var i,s=this,o=null,u=null,a="soundManager",f=a+": ",l="HTML5::",c,h=navigator.userAgent,p=e.location.href.toString(),d=document,v,m,g,y,b=[],w=!0,E,S=!1,x=!1,T=!1,N=!1,C=!1,k,L=0,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G=["log","info","warn","error"],Y=8,Z,et,tt,nt=null,rt=null,it,st,ot,ut,at,ft,lt,ct,ht,pt=!1,dt=!1,vt,mt,gt,yt=0,bt=null,wt,Et=[],St,xt=null,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t=Array.prototype.slice,Dt=!1,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut=0,zt=h.match(/(ipad|iphone|ipod)/i),Wt=h.match(/android/i),Xt=h.match(/msie/i),Vt=h.match(/webkit/i),$t=h.match(/safari/i)&&!h.match(/chrome/i),Jt=h.match(/opera/i),Kt=h.match(/firefox/i),Qt=h.match(/(mobile|pre\/|xoom)/i)||zt||Wt,Gt=!p.match(/usehtml5audio/i)&&!p.match(/sm2\-ignorebadua/i)&&$t&&!h.match(/silk/i)&&h.match(/OS X 10_6_([3-7])/i),Yt=e.console!==t&&console.log!==t,Zt=d.hasFocus!==t?d.hasFocus():null,en=$t&&(d.hasFocus===t||!d.hasFocus()),tn=!en,nn=/(mp3|mp4|mpa|m4a|m4b)/i,rn=1e3,sn="about:blank",on=d.location?d.location.protocol.match(/http/i):null,un=on?"":"http://",an=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,fn=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ln=new RegExp("\\.("+fn.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!on;ut={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.hasHTML5=function(){try{return Audio!==t&&(Jt&&opera!==t&&opera.version()<10?new Audio(null):new Audio).canPlayType!==t}catch(e){return!1}}();this.setup=function(e){var n=!s.url;e!==t&&T&&xt&&s.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t);M(e);if(e){n&&X&&e.url!==t&&s.beginDelayedInit();!X&&e.url!==t&&d.readyState==="complete"&&setTimeout(z,1)}return s};this.ok=function(){return xt?T&&!N:s.useHTML5Audio&&s.hasHTML5};this.supported=this.ok;this.getMovie=function(t){return c(t)||d[t]||e[t]};this.createSound=function(e,n){function l(){a=ft(a);s.sounds[a.id]=new i(a);s.soundIDs.push(a.id);return s.sounds[a.id]}var r,o,a,f=null;if(!T||!s.ok())return!1;n!==t&&(e={id:e,url:n});a=O(e);a.url=wt(a.url);a.id===undefined&&(a.id=s.setupOptions.idPrefix+Ut++);if(ht(a.id,!0))return s.sounds[a.id];if(Nt(a)){f=l();f._setup_html5(a)}else{if(s.html5Only)return l();if(s.html5.usingFlash&&a.url&&a.url.match(/data\:/i))return l();y>8&&a.isMovieStar===null&&(a.isMovieStar=!!(a.serverURL||(a.type?a.type.match(an):!1)||a.url&&a.url.match(ln)));a=lt(a,r);f=l();if(y===8)u._createSound(a.id,a.loops||1,a.usePolicyFile);else{u._createSound(a.id,a.url,a.usePeakData,a.useWaveformData,a.useEQData,a.isMovieStar,a.isMovieStar?a.bufferTime:!1,a.loops||1,a.serverURL,a.duration||null,a.autoPlay,!0,a.autoLoad,a.usePolicyFile);if(!a.serverURL){f.connected=!0;a.onconnect&&a.onconnect.apply(f)}}!a.serverURL&&(a.autoLoad||a.autoPlay)&&f.load(a)}!a.serverURL&&a.autoPlay&&f.play();return f};this.destroySound=function(e,t){if(!ht(e))return!1;var n=s.sounds[e],r;n._iO={};n.stop();n.unload();for(r=0;r<s.soundIDs.length;r++)if(s.soundIDs[r]===e){s.soundIDs.splice(r,1);break}t||n.destruct(!0);n=null;delete s.sounds[e];return!0};this.load=function(e,t){return ht(e)?s.sounds[e].load(t):!1};this.unload=function(e){return ht(e)?s.sounds[e].unload():!1};this.onPosition=function(e,t,n,r){return ht(e)?s.sounds[e].onposition(t,n,r):!1};this.onposition=this.onPosition;this.clearOnPosition=function(e,t,n){return ht(e)?s.sounds[e].clearOnPosition(t,n):!1};this.play=function(e,t){var n=null,r=t&&!(t instanceof Object);if(!T||!s.ok())return!1;if(!ht(e,r)){if(!r)return!1;r&&(t={url:t});if(t&&t.url){t.id=e;n=s.createSound(t).play()}}else r&&(t={url:t});n===null&&(n=s.sounds[e].play(t));return n};this.start=this.play;this.setPosition=function(e,t){return ht(e)?s.sounds[e].setPosition(t):!1};this.stop=function(e){return ht(e)?s.sounds[e].stop():!1};this.stopAll=function(){var e;for(e in s.sounds)s.sounds.hasOwnProperty(e)&&s.sounds[e].stop()};this.pause=function(e){return ht(e)?s.sounds[e].pause():!1};this.pauseAll=function(){var e;for(e=s.soundIDs.length-1;e>=0;e--)s.sounds[s.soundIDs[e]].pause()};this.resume=function(e){return ht(e)?s.sounds[e].resume():!1};this.resumeAll=function(){var e;for(e=s.soundIDs.length-1;e>=0;e--)s.sounds[s.soundIDs[e]].resume()};this.togglePause=function(e){return ht(e)?s.sounds[e].togglePause():!1};this.setPan=function(e,t){return ht(e)?s.sounds[e].setPan(t):!1};this.setVolume=function(e,t){return ht(e)?s.sounds[e].setVolume(t):!1};this.mute=function(e){var t=0;e instanceof String&&(e=null);if(!e){for(t=s.soundIDs.length-1;t>=0;t--)s.sounds[s.soundIDs[t]].mute();s.muted=!0;return!0}return ht(e)?s.sounds[e].mute():!1};this.muteAll=function(){s.mute()};this.unmute=function(e){var t;e instanceof String&&(e=null);if(!e){for(t=s.soundIDs.length-1;t>=0;t--)s.sounds[s.soundIDs[t]].unmute();s.muted=!1;return!0}return ht(e)?s.sounds[e].unmute():!1};this.unmuteAll=function(){s.unmute()};this.toggleMute=function(e){return ht(e)?s.sounds[e].toggleMute():!1};this.getMemoryUse=function(){var e=0;u&&y!==8&&(e=parseInt(u._getMemoryUse(),10));return e};this.disable=function(n){var r;n===t&&(n=!1);if(N)return!1;N=!0;for(r=s.soundIDs.length-1;r>=0;r--)Z(s.sounds[s.soundIDs[r]]);A(n);Mt.remove(e,"load",H);return!0};this.canPlayMIME=function(e){var t;s.hasHTML5&&(t=Ct({type:e}));!t&&xt&&(t=e&&s.ok()?!!((y>8?e.match(an):null)||e.match(s.mimePattern)):null);return t};this.canPlayURL=function(e){var t;s.hasHTML5&&(t=Ct({url:e}));!t&&xt&&(t=e&&s.ok()?!!e.match(s.filePattern):null);return t};this.canPlayLink=function(e){return e.type!==t&&e.type&&s.canPlayMIME(e.type)?!0:s.canPlayURL(e.href)};this.getSoundById=function(e,t){if(!e)return null;var n=s.sounds[e];return n};this.onready=function(t,n){var r="onready",i=!1;if(typeof t!="function")throw it("needFunction",r);n||(n=e);D(r,t,n);P();i=!0;return i};this.ontimeout=function(t,n){var r="ontimeout",i=!1;if(typeof t!="function")throw it("needFunction",r);n||(n=e);D(r,t,n);P({type:r});i=!0;return i};this._writeDebug=function(e,t){return!0};this._wD=this._writeDebug;this._debug=function(){};this.reboot=function(t,n){var r,i,o;for(r=s.soundIDs.length-1;r>=0;r--)s.sounds
[s.soundIDs[r]].destruct();if(u)try{Xt&&(rt=u.innerHTML);nt=u.parentNode.removeChild(u)}catch(a){}rt=nt=xt=u=null;s.enabled=X=T=pt=dt=S=x=N=Dt=s.swfLoaded=!1;s.soundIDs=[];s.sounds={};Ut=0;if(!t){for(r in b)if(b.hasOwnProperty(r))for(i=0,o=b[r].length;i<o;i++)b[r][i].fired=!1}else b=[];s.html5={usingFlash:null};s.flash={};s.html5Only=!1;s.ignoreFlash=!1;e.setTimeout(function(){U();n||s.beginDelayedInit()},20);return s};this.reset=function(){return s.reboot(!0,!0)};this.getMoviePercent=function(){return u&&"PercentLoaded"in u?u.PercentLoaded():null};this.beginDelayedInit=function(){C=!0;z();setTimeout(function(){if(dt)return!1;$();R();dt=!0;return!0},20);B()};this.destruct=function(){s.disable(!0)};i=function(e){var n=this,r,i,a,f,l,c,h=!1,p=[],d=0,v,m,g=null,b,w;b={duration:null,time:null};this.id=e.id;this.sID=this.id;this.url=e.url;this.options=O(e);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=!1;this._a=null;w=this.url?!1:!0;this.id3={};this._debug=function(){};this.load=function(e){var r=null,i;if(e!==t)n._iO=O(e,n.options);else{e=n.options;n._iO=e;if(g&&g!==n.url){n._iO.url=n.url;n.url=null}}n._iO.url||(n._iO.url=n.url);n._iO.url=wt(n._iO.url);n.instanceOptions=n._iO;i=n._iO;if(!i.url&&!n.url)return n;if(i.url===n.url&&n.readyState!==0&&n.readyState!==2){n.readyState===3&&i.onload&&Rt(n,function(){i.onload.apply(n,[!!n.duration])});return n}n.loaded=!1;n.readyState=1;n.playState=0;n.id3={};if(Nt(i)){r=n._setup_html5(i);if(!r._called_load){n._html5_canplay=!1;if(n.url!==i.url){n._a.src=i.url;n.setPosition(0)}n._a.autobuffer="auto";n._a.preload="auto";n._a._called_load=!0;i.autoPlay&&n.play()}}else{if(s.html5Only)return n;if(n._iO.url&&n._iO.url.match(/data\:/i))return n;try{n.isHTML5=!1;n._iO=lt(ft(i));i=n._iO;y===8?u._load(n.id,i.url,i.stream,i.autoPlay,i.usePolicyFile):u._load(n.id,i.url,!!i.stream,!!i.autoPlay,i.loops||1,!!i.autoLoad,i.usePolicyFile)}catch(o){J({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}n.url=i.url;return n};this.unload=function(){if(n.readyState!==0){if(!n.isHTML5)y===8?u._unload(n.id,sn):u._unload(n.id);else{f();if(n._a){n._a.pause();g=Lt(n._a)}}r()}return n};this.destruct=function(e){if(!n.isHTML5){n._iO.onfailure=null;u._destroySound(n.id)}else{f();if(n._a){n._a.pause();Lt(n._a);Dt||a();n._a._s=null;n._a=null}}e||s.destroySound(n.id,!0)};this.play=function(e,r){var i,o,a,f,p,d,v,g=!0,b=null;r=r===t?!0:r;e||(e={});n.url&&(n._iO.url=n.url);n._iO=O(n._iO,n.options);n._iO=O(e,n._iO);n._iO.url=wt(n._iO.url);n.instanceOptions=n._iO;if(!n.isHTML5&&n._iO.serverURL&&!n.connected){n.getAutoPlay()||n.setAutoPlay(!0);return n}if(Nt(n._iO)){n._setup_html5(n._iO);l()}if(n.playState===1&&!n.paused){o=n._iO.multiShot;if(!o){n.isHTML5&&n.setPosition(n._iO.position);b=n}}if(b!==null)return b;e.url&&e.url!==n.url&&(!n.readyState&&!n.isHTML5&&y===8&&w?w=!1:n.load(n._iO));if(!n.loaded)if(n.readyState===0){if(!n.isHTML5&&!s.html5Only){n._iO.autoPlay=!0;n.load(n._iO)}else n.isHTML5?n.load(n._iO):b=n;n.instanceOptions=n._iO}else n.readyState===2&&(b=n);if(b!==null)return b;!n.isHTML5&&y===9&&n.position>0&&n.position===n.duration&&(e.position=0);if(n.paused&&n.position>=0&&(!n._iO.serverURL||n.position>0))n.resume();else{n._iO=O(e,n._iO);if(n._iO.from!==null&&n._iO.to!==null&&n.instanceCount===0&&n.playState===0&&!n._iO.serverURL){f=function(){n._iO=O(e,n._iO);n.play(n._iO)};if(n.isHTML5&&!n._html5_canplay){n.load({oncanplay:f});b=!1}else if(!n.isHTML5&&!n.loaded&&(!n.readyState||n.readyState!==2)){n.load({onload:f});b=!1}if(b!==null)return b;n._iO=m()}(!n.instanceCount||n._iO.multiShotEvents||n.isHTML5&&n._iO.multiShot&&!Dt||!n.isHTML5&&y>8&&!n.getAutoPlay())&&n.instanceCount++;n._iO.onposition&&n.playState===0&&c(n);n.playState=1;n.paused=!1;n.position=n._iO.position!==t&&!isNaN(n._iO.position)?n._iO.position:0;n.isHTML5||(n._iO=lt(ft(n._iO)));if(n._iO.onplay&&r){n._iO.onplay.apply(n);h=!0}n.setVolume(n._iO.volume,!0);n.setPan(n._iO.pan,!0);if(!n.isHTML5){g=u._start(n.id,n._iO.loops||1,y===9?n.position:n.position/rn,n._iO.multiShot||!1);y===9&&!g&&n._iO.onplayerror&&n._iO.onplayerror.apply(n)}else if(n.instanceCount<2){l();a=n._setup_html5();n.setPosition(n._iO.position);a.play()}else{p=new Audio(n._iO.url);d=function(){Mt.remove(p,"onended",d);n._onfinish(n);Lt(p);p=null};v=function(){Mt.remove(p,"canplay",v);try{p.currentTime=n._iO.position/rn}catch(e){}p.play()};Mt.add(p,"ended",d);n._iO.position?Mt.add(p,"canplay",v):p.play()}}return n};this.start=this.play;this.stop=function(e){var t=n._iO,r;if(n.playState===1){n._onbufferchange(0);n._resetOnPosition(0);n.paused=!1;n.isHTML5||(n.playState=0);v();t.to&&n.clearOnPosition(t.to);if(!n.isHTML5){u._stop(n.id,e);t.serverURL&&n.unload()}else if(n._a){r=n.position;n.setPosition(0);n.position=r;n._a.pause();n.playState=0;n._onTimer();f()}n.instanceCount=0;n._iO={};t.onstop&&t.onstop.apply(n)}return n};this.setAutoPlay=function(e){n._iO.autoPlay=e;if(!n.isHTML5){u._setAutoPlay(n.id,e);e&&!n.instanceCount&&n.readyState===1&&n.instanceCount++}};this.getAutoPlay=function(){return n._iO.autoPlay};this.setPosition=function(e){e===t&&(e=0);var r,i,s=n.isHTML5?Math.max(e,0):Math.min(n.duration||n._iO.duration,Math.max(e,0));n.position=s;i=n.position/rn;n._resetOnPosition(n.position);n._iO.position=s;if(!n.isHTML5){r=y===9?n.position:i;n.readyState&&n.readyState!==2&&u._setPosition(n.id,r,n.paused||!n.playState,n._iO.multiShot)}else if(n._a){if(n._html5_canplay){if(n._a.currentTime!==i)try{n._a.currentTime=i;(n.playState===0||n.paused)&&n._a.pause()}catch(o){}}else if(i)return n;n.paused&&n._onTimer(!0)}return n};this.pause=function(e){if(n.paused||n.playState===0&&n.readyState!==1)return n;n.paused=!0;if(!n.isHTML5)(e||e===t)&&u._pause(n.id,n._iO.multiShot);else{n._setup_html5().pause();f()}n._iO.onpause&&n._iO.onpause.apply(n);return n};this.resume=function(){var e=n._iO;if(!n.paused)return n;n.paused=!1;n.playState=1;if(!n.isHTML5){e.isMovieStar&&!e.serverURL&&n.setPosition(n.position);u._pause(n.id,e.multiShot)}else{n._setup_html5().play();l()}if(!h&&e.onplay){e.onplay.apply(n);h=!0}else e.onresume&&e.onresume.apply(n);return n};this.togglePause=function(){if(n.playState===0){n.play({position:y===9&&!n.isHTML5?n.position:n.position/rn});return n}n.paused?n.resume():n.pause();return n};this.setPan=function(e,r){e===t&&(e=0);r===t&&(r=!1);n.isHTML5||u._setPan(n.id,e);n._iO.pan=e;if(!r){n.pan=e;n.options.pan=e}return n};this.setVolume=function(e,r){e===t&&(e=100);r===t&&(r=!1);n.isHTML5?n._a&&(n._a.volume=Math.max(0,Math.min(1,e/100))):u._setVolume(n.id,s.muted&&!n.muted||n.muted?0:e);n._iO.volume=e;if(!r){n.volume=e;n.options.volume=e}return n};this.mute=function(){n.muted=!0;n.isHTML5?n._a&&(n._a.muted=!0):u._setVolume(n.id,0);return n};this.unmute=function(){n.muted=!1;var e=n._iO.volume!==t;n.isHTML5?n._a&&(n._a.muted=!1):u._setVolume(n.id,e?n._iO.volume:n.options.volume);return n};this.toggleMute=function(){return n.muted?n.unmute():n.mute()};this.onPosition=function(e,r,i){p.push({position:parseInt(e,10),method:r,scope:i!==t?i:n,fired:!1});return n};this.onposition=this.onPosition;this.clearOnPosition=function(e,t){var n;e=parseInt(e,10);if(isNaN(e))return!1;for(n=0;n<p.length;n++)if(e===p[n].position)if(!t||t===p[n].method){p[n].fired&&d--;p.splice(n,1)}};this._processOnPosition=function(){var e,t,r=p.length;if(!r||!n.playState||d>=r)return!1;for(e=r-1;e>=0;e--){t=p[e];if(!t.fired&&n.position>=t.position){t.fired=!0;d++;t.method.apply(t.scope,[t.position])}}return!0};this._resetOnPosition=function(e){var t,n,r=p.length;if(!r)return!1;for(t=r-1;t>=0;t--){n=p[t];if(n.fired&&e<=n.position){n.fired=!1;d--}}return!0};m=function(){var e=n._iO,t=e.from,r=e.to,i,s;s=function(){n.clearOnPosition(r,s);n.stop()};i=function(){r!==null&&!isNaN(r)&&n.onPosition(r,s)};if(t!==null&&!isNaN(t)){e.position=t;e.multiShot=!1;i()}return e};c=function(){var e,t=n._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&n.onPosition(parseInt(e,10),t[e])};v=function(){var e,t=n._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&n.clearOnPosition(parseInt(e,10))};l=function(){n.isHTML5&&vt(n)};f=function(){n.isHTML5&&mt(n)};r=function(e){if(!e){p=[];d=0}h=!1;n._hasTimer=null;n._a=null;n._html5_canplay=!1;n.bytesLoaded=null;n.bytesTotal=null;n.duration=n._iO&&n._iO.duration?n._iO.duration:null;n.durationEstimate=null;n.buffered=[];n.eqData=[];n.eqData.left=[];n.eqData.right=[];n.failures=0;n.isBuffering=!1;n.instanceOptions={};n.instanceCount=0;n.loaded=!1;n.metadata={};n.readyState=0;n.muted=!1;n.paused=!1;n.peakData={left:0,right:0};n.waveformData={left:[],right:[]};n.playState=0;n.position=null;n.id3={}};r();this._onTimer=function(e){var t,r=!1,i,s={};if(n._hasTimer||e){if(n._a&&(e||(n.playState>0||n.readyState===1)&&!n.paused)){t=n._get_html5_duration();if(t!==b.duration){b.duration=t;n.duration=t;r=!0}n.durationEstimate=n.duration;i=n._a.currentTime*rn||0;if(i!==b.time){b.time=i;r=!0}(r||e)&&n._whileplaying(i,s,s,s,s)}return r}};this._get_html5_duration=function(){var e=n._iO,t=n._a&&n._a.duration?n._a.duration*rn:e&&e.duration?e.duration:null,r=t&&!isNaN(t)&&t!==Infinity?t:null;return r};this._apply_loop=function(e,t){e.loop=t>1?"loop":""};this._setup_html5=function(e){var t=O(n._iO,e),s=Dt?o:n._a,u=decodeURI(t.url),a;Dt?u===decodeURI(Pt)&&(a=!0):u===decodeURI(g)&&(a=!0);if(s){if(s._s)if(Dt)s._s&&s._s.playState&&!a&&s._s.stop();else if(!Dt&&u===decodeURI(g)){n._apply_loop(s,t.loops);return s}if(!a){r(!1);s.src=t.url;n.url=t.url;g=t.url;Pt=t.url;s._called_load=!1}}else{t.autoLoad||t.autoPlay?n._a=new Audio(t.url):n._a=Jt&&opera.version()<10?new Audio(null):new Audio;s=n._a;s._called_load=!1;Dt&&(o=s)}n.isHTML5=!0;n._a=s;s._s=n;i();n._apply_loop(s,t.loops);if(t.autoLoad||t.autoPlay)n.load();else{s.autobuffer=!1;s.preload="auto"}return s};i=function(){function t(e,t,r){return n._a?n._a.addEventListener(e,t,r||!1):null}if(n._a._added_events)return!1;var e;n._a._added_events=!0;for(e in Ft)Ft.hasOwnProperty(e)&&t(e,Ft[e]);return!0};a=function(){function t(e,t,r){return n._a?n._a.removeEventListener(e,t,r||!1):null}var e;n._a._added_events=!1;for(e in Ft)Ft.hasOwnProperty(e)&&t(e,Ft[e])};this._onload=function(e){var t,r=!!e||!n.isHTML5&&y===8&&n.duration;n.loaded=r;n.readyState=r?3:2;n._onbufferchange(0);n._iO.onload&&Rt(n,function(){n._iO.onload.apply(n,[r])});return!0};this._onbufferchange=function(e){if(n.playState===0)return!1;if(e&&n.isBuffering||!e&&!n.isBuffering)return!1;n.isBuffering=e===1;n._iO.onbufferchange&&n._iO.onbufferchange.apply(n);return!0};this._onsuspend=function(){n._iO.onsuspend&&n._iO.onsuspend.apply(n);return!0};this._onfailure=function(e,t,r){n.failures++;n._iO.onfailure&&n.failures===1&&n._iO.onfailure(n,e,t,r)};this._onfinish=function(){var e=n._iO.onfinish;n._onbufferchange(0);n._resetOnPosition(0);if(n.instanceCount){n.instanceCount--;if(!n.instanceCount){v();n.playState=0;n.paused=!1;n.instanceCount=0;n.instanceOptions={};n._iO={};f();n.isHTML5&&(n.position=0)}(!n.instanceCount||n._iO.multiShotEvents)&&e&&Rt(n,function(){e.apply(n)})}};this._whileloading=function(e,t,r,i){var s=n._iO;n.bytesLoaded=e;n.bytesTotal=t;n.duration=Math.floor(r);n.bufferLength=i;!n.isHTML5&&!s.isMovieStar?s.duration?n.durationEstimate=n.duration>s.duration?n.duration:s.duration:n.durationEstimate=parseInt(n.bytesTotal/n.bytesLoaded*n.duration,10):n.durationEstimate=n.duration;n.isHTML5||(n.buffered=[{start:0,end:n.duration}]);(n.readyState!==3||n.isHTML5)&&s.whileloading&&s.whileloading.apply(n)};this._whileplaying=function(e,r,i,s,o){var u=n._iO,a;if(isNaN(e)||e===null)return!1;n.position=Math.max(0,e);n._processOnPosition();if(!n.isHTML5&&y>8){u.usePeakData&&r!==t&&r&&(n.peakData={left:r.leftPeak,right:r.rightPeak});u.useWaveformData&&i!==t&&i&&(n.waveformData={left:i.split(","),right:s.split(",")});if(u.useEQData&&o!==t&&o&&o.leftEQ){a=o.leftEQ.split(",");n.eqData=a;n.eqData.left=a;o.rightEQ!==t&&o.rightEQ&&(n.eqData.right=o.rightEQ.split(","))}}if(n.playState===1){!n.isHTML5&&y===8&&!n.position&&n.isBuffering&&n._onbufferchange(0);u.whileplaying&&u.whileplaying.apply(n)}return!0};this._oncaptiondata=function(e){n.captiondata=e;n._iO.oncaptiondata&&n._iO.oncaptiondata.apply(n,[e])};this._onmetadata=function(e,t){var r={},i,s;for(i=0,s=e.length;i<s;i++)r[e[i]]=t[i];n.metadata=r;n._iO.onmetadata&&n._iO.onmetadata.apply(n)};this._onid3=function(e,t){var r=[],i,s;for(i=0,s=e.length;i<s;i++)r[e[i]]=t[i];n.id3=O(n.id3,r);n._iO.onid3&&n._iO.onid3.apply(n)};this._onconnect=function(e){e=e===1;n.connected=e;if(e){n.failures=0;ht(n.id)&&(n.getAutoPlay()?n.play(t,n.getAutoPlay()):n._iO.autoLoad&&n.load());n._iO.onconnect&&n._iO.onconnect.apply(n,[e])}};this._ondataerror=function(e){n.playState>0&&n._iO.ondataerror&&n._iO.ondataerror.apply(n)}};V=function(){return d.body||d._docElement||d.getElementsByTagName("div")[0]};c=function(e){return d.getElementById(e)};O=function(e,n){var r=e||{},i,o;i=n===t?s.defaultOptions:n;for(o in i)i.hasOwnProperty(o)&&r[o]===t&&(typeof i[o]!="object"||i[o]===null?r[o]=i[o]:r[o]=O(r[o],i[o]));return r};Rt=function(t,n){!t.isHTML5&&y===8?e.setTimeout(n,0):n()};_={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};M=function(e,n){var r,i=!0,o=n!==t,u=s.setupOptions,a=_;for(r in e)if(e.hasOwnProperty(r))if(typeof e[r]!="object"||e[r]===null||e[r]instanceof Array||e[r]instanceof RegExp)if(o&&a[n]!==t)s[n][r]=e[r];else if(u[r]!==t){s.setupOptions[r]=e[r];s[r]=e[r]}else a[r]===t?i=!1:s[r]instanceof Function?s[r].apply(s,e[r]instanceof Array?e[r]:[e[r]]):s[r]=e[r];else{if(a[r]!==t)return M(e[r],r);i=!1}return i};Mt=function(){function r(e){var n=_t.call(e),r=n.length;if(t){n[1]="on"+n[1];r>3&&n.pop()}else r===3&&n.push(!1);return n}function i(e,r){var i=e.shift(),s=[n[r]];t?i[s](e[0],e[1]):i[s].apply(i,e)}function s(){i(r(arguments),"add")}function o(){i(r(arguments),"remove")}var t=e.attachEvent,n={add:t?"attachEvent":"addEventListener",remove:t?"detachEvent":"removeEventListener"};return{add:s,remove:o}}();Ft={abort:hn(function(){}),canplay:hn(function(){var e=this._s,n;if(e._html5_canplay)return!0;e._html5_canplay=!0;e._onbufferchange(0);n=e._iO.position!==t&&!isNaN(e._iO.position)?e._iO.position/rn:null;if(e.position&&this.currentTime!==n)try{this.currentTime=n}catch(r){}e._iO._oncanplay&&e._iO._oncanplay()}),canplaythrough:hn(function(){var e=this._s;if(!e.loaded){e._onbufferchange(0);e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration());e._onload(!0)}}),ended:hn(function(){var e=this._s;e._onfinish()}),error:hn(function(){this._s._onload(!1)}),loadeddata:hn(function(){var e=this._s;!e._loaded&&!$t&&(e.duration=e._get_html5_duration())}),loadedmetadata:hn(function(){}),loadstart:hn(function(){this._s._onbufferchange(1)}),play:hn(function(){this._s._onbufferchange(0)}),playing:hn(function(){this._s._onbufferchange(0)}),progress:hn(function(e){var t=this._s,n,r,i,s=0,o=e.type==="progress",u=e.target.buffered,a=e.loaded||0,f=e.total||1;t.buffered=[];if(u&&u.length){for(n=0,r=u.length;n<r;n++)t.buffered.push({start:u.start(n)*rn,end:u.end(n)*rn});s=(u.end(0)-u.start(0))*rn;a=Math.min(1,s/(e.target.duration*rn))}if(!isNaN(a)){t._onbufferchange(0);t._whileloading(a,f,t._get_html5_duration());a&&f&&a===f&&Ft.canplaythrough.call(this,e)}}),ratechange:hn(function(){}),suspend:hn(function(e){var t=this._s;Ft.progress.call(this,e);t._onsuspend()}),stalled:hn(function(){}),timeupdate:hn(function(){this._s._onTimer()}),waiting:hn(function(){var e=this._s;e._onbufferchange(1)})};Nt=function(e){var t;!e||!e.type&&!e.url&&!e.serverURL?t=!1:e.serverURL||e.type&&cn(e.type)?t=!1:t=e.type?Ct({type:e.type}):Ct({url:e.url})||s.html5Only||e.url.match(/data\:/i);return t};Lt=function(e){var t;if(e){t=$t&&!zt?null:Kt?sn:null;e.src=t;e._called_unload!==undefined&&(e._called_load=!1)}Dt&&(Pt=null);return t};Ct=function(e){if(!s.useHTML5Audio||!s.hasHTML5)return!1;var n=e.url||null,r=e.type||null,i=s.audioFormats,o,u,a,f;if(r&&s.html5[r]!==t)return s.html5[r]&&!cn(r);if(!kt){kt=[];for(f in i)if(i.hasOwnProperty(f)){kt.push(f);i[f].related&&(kt=kt.concat(i[f].related))}kt=new RegExp("\\.("+kt.join("|")+")(\\?.*)?$","i")}a=n?n.toLowerCase().match(kt):null;if(!a||!a.length)if(!r)o=!1;else{u=r.indexOf(";");a=(u!==-1?r.substr(0,u):r).substr(6)}else a=a[1];if(a&&s.html5[a]!==t)o=s.html5[a]&&!cn(a);else{r="audio/"+a;o=s.html5.canPlayType({type:r});s.html5[a]=o;o=o&&s.html5[r]&&!cn(r)}return o};Ot=function(){function a(t){var n,r,i,o=!1,u=!1;if(!e||typeof e.canPlayType!="function")return o;if(t instanceof Array){for(r=0,i=t.length;r<i;r++)if(s.html5[t[r]]||e.canPlayType(t[r]).match(s.html5Test)){u=!0;s.html5[t[r]]=!0;s.flash[t[r]]=!!t[r].match(nn)}o=u}else{n=e&&typeof e.canPlayType=="function"?e.canPlayType(t):!1;o=!!n&&!!n.match(s.html5Test)}return o}if(!s.useHTML5Audio||!s.hasHTML5){s.html5.usingFlash=!0;xt=!0;return!1}var e=Audio!==t?Jt&&opera.version()<10?new Audio(null):new Audio:null,n,r,i={},o,u;o=s.audioFormats;for(n in o)if(o.hasOwnProperty(n)){r="audio/"+n;i[n]=a(o[n].type);i[r]=i[n];if(n.match(nn)){s.flash[n]=!0;s.flash[r]=!0}else{s.flash[n]=!1;s.flash[r]=!1}if(o[n]&&o[n].related)for(u=o[n].related.length-1;u>=0;u--){i["audio/"+o[n].related[u]]=i[n];s.html5[o[n].related[u]]=i[n];s.flash[o[n].related[u]]=i[n]}}i.canPlayType=e?a:null;s.html5=O(s.html5,i);s.html5.usingFlash=Tt();xt=s.html5.usingFlash;return!0};q={};it=function(){};ft=function(e){y===8&&e.loops>1&&e.stream&&(e.stream=!1);return e};lt=function(e,t){e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(e.usePolicyFile=!0);return e};ct=function(e){};v=function(){return!1};Z=function(e){var t;for(t in e)e.hasOwnProperty(t)&&typeof e[t]=="function"&&(e[t]=v);t=null};et=function(e){e===t&&(e=!1);(N||e)&&s.disable(e)};tt=function(e){var t=null,n;if(e)if(e.match(/\.swf(\?.*)?$/i)){t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4);if(t)return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");n=(e&&e.lastIndexOf("/")!==-1?e.substr(0,e.lastIndexOf("/")+1):"./")+s.movieURL;s.noSWFCache&&(n+="?ts="+(new Date).getTime());return n};F=function(){y=parseInt(s.flashVersion,10);y!==8&&y!==9&&(s.flashVersion=y=Y);var e=s.debugMode||s.debugFlash?"_debug.swf":".swf";s.useHTML5Audio&&!s.html5Only&&s.audioFormats.mp4.required&&y<9&&(s.flashVersion=y=9);s.version=s.versionNumber+(s.html5Only?" (HTML5-only mode)":y===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(y>8){s.defaultOptions=O(s.defaultOptions,s.flash9Options);s.features.buffering=!0;s.defaultOptions=O(s.defaultOptions,s.movieStarOptions);s.filePatterns.flash9=new RegExp("\\.(mp3|"+fn.join("|")+")(\\?.*)?$","i");s.features.movieStar=!0}else s.features.movieStar=!1;s.filePattern=s.filePatterns[y!==8?"flash9":"flash8"];s.movieURL=(y===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e);s.features.peakData=s.features.waveformData=s.features.eqData=y>8};K=function(e,t){if(!u)return!1;u._setPolling(e,t)};Q=function(){};ht=this.getSoundById;ot=function(){var e=[];s.debugMode&&e.push(ut.sm2Debug);s.debugFlash&&e.push(ut.flashDebug);s.useHighPerformance&&e.push(ut.highPerf);return e.join(" ")};st=function(){var e=it("fbHandler"),t=s.getMoviePercent(),n=ut,r={type:"FLASHBLOCK"};if(s.html5Only)return!1;if(!s.ok()){xt&&(s.oMC.className=ot()+" "+n.swfDefault+" "+(t===null?n.swfTimedout:n.swfError));s.didFlashBlock=!0;P({type:"ontimeout",ignoreInit:!0,error:r});J(r)}else s.oMC&&(s.oMC.className=[ot(),n.swfDefault,n.swfLoaded+(s.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))};D=function(e,n,r){b[e]===t&&(b[e]=[]);b[e].push({method:n,scope:r||null,fired:!1})};P=function(e){e||(e={type:s.ok()?"onready":"ontimeout"});if(!T&&e&&!e.ignoreInit)return!1;if(e.type==="ontimeout"&&(s.ok()||N&&!e.ignoreInit))return!1;var t={success:e&&e.ignoreInit?s.ok():!N},n=e&&e.type?b[e.type]||[]:[],r=[],i,o,u=[t],a=xt&&!s.ok();e.error&&(u[0].error=e.error);for(i=0,o=n.length;i<o;i++)n[i].fired!==!0&&r.push(n[i]);if(r.length)for(i=0,o=r.length;i<o;i++){r[i].scope?r[i].method.apply(r[i].scope,u):r[i].method.apply(this,u);a||(r[i].fired=!0)}return!0};H=function(){e.setTimeout(function(){s.useFlashBlock&&st();P();typeof s.onload=="function"&&s.onload.apply(e);s.waitForWindowLoad&&Mt.add(e,"load",H)},1)};Bt=function(){if(Ht!==t)return Ht;var n=!1,r=navigator,i=r.plugins,s,o,u,a=e.ActiveXObject;if(i&&i.length){o="application/x-shockwave-flash";u=r.mimeTypes;u&&u[o]&&u[o].enabledPlugin&&u[o].enabledPlugin.description&&(n=!0)}else if(a!==t&&!h.match(/MSAppHost/i)){try{s=new a("ShockwaveFlash.ShockwaveFlash")}catch(f){s=null}n=!!s;s=null}Ht=n;return n};Tt=function(){var e,t,n=s.audioFormats,r=zt&&!!h.match(/os (1|2|3_0|3_1)/i);if(r){s.hasHTML5=!1;s.html5Only=!0;s.oMC&&(s.oMC.style.display="none")}else s.useHTML5Audio&&(!s.html5||!s.html5.canPlayType)&&(s.hasHTML5=!1);if(s.useHTML5Audio&&s.hasHTML5){St=!0;for(t in n)if(n.hasOwnProperty(t)&&n[t].required)if(!s.html5.canPlayType(n[t].type)){St=!1;e=!0}else s.preferFlash&&(s.flash[t]||s.flash[n[t].type])&&(e=!0)}if(s.ignoreFlash){e=!1;St=!0}s.html5Only=s.hasHTML5&&s.useHTML5Audio&&!e;return!s.html5Only};wt=function(e){var t,n,r=0,i;if(e instanceof Array){for(t=0,n=e.length;t<n;t++)if(e[t]instanceof Object){if(s.canPlayMIME(e[t].type)){r=t;break}}else if(s.canPlayURL(e[t])){r=t;break}e[r].url&&(e[r]=e[r].url);i=e[r]}else i=e;return i};vt=function(e){if(!e._hasTimer){e._hasTimer=!0;if(!Qt&&s.html5PollingInterval){bt===null&&yt===0&&(bt=setInterval(gt,s.html5PollingInterval));yt++}}};mt=function(e){if(e._hasTimer){e._hasTimer=!1;!Qt&&s.html5PollingInterval&&yt--}};gt=function(){var e;if(bt!==null&&!yt){clearInterval(bt);bt=null;return!1}for(e=s.soundIDs.length-1;e>=0;e--)s.sounds[s.soundIDs[e]].isHTML5&&s.sounds[s.soundIDs[e]]._hasTimer&&s.sounds[s.soundIDs[e]]._onTimer()};J=function(n){n=n!==t?n:{};typeof s.onerror=="function"&&s.onerror.apply(e,[{type:n.type!==t?n.type:null}]);n.fatal!==t&&n.fatal&&s.disable()};jt=function(){if(!Gt||!Bt())return!1;var e=s.audioFormats,t,n;for(n in e)if(e.hasOwnProperty(n))if(n==="mp3"||n==="mp4"){s.html5[n]=!1;if(e[n]&&e[n].related)for(t=e[n].related.length-1;t>=0;t--)s.html5[e[n].related[t]]=!1}};this._setSandboxType=function(e){};this._externalInterfaceOK=function(e){if(s.swfLoaded)return!1;var t;s.swfLoaded=!0;en=!1;Gt&&jt();setTimeout(g,Xt?100:1)};$=function(e,n){function r(){}function C(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(S&&x)return!1;if(s.html5Only){F();r();s.oMC=c(s.movieID);g();S=!0;x=!0;return!1}var i=n||s.url,o=s.altURL||i,u="JS/Flash audio component (SoundManager 2)",a=V(),f=ot(),l=null,p=d.getElementsByTagName("html")[0],v,m,y,b,w,E,T,N;l=p&&p.dir&&p.dir.match(/rtl/i);e=e===t?s.id:e;F();s.url=tt(on?i:o);n=s.url;s.wmode=!s.wmode&&s.useHighPerformance?"transparent":s.wmode;if(s.wmode!==null&&(h.match(/msie 8/i)||!Xt&&!s.useHighPerformance)&&navigator.platform.match(/win32|win64/i)){Et.push(q.spcWmode);s.wmode=null}v={name:e,id:e,src:n,quality:"high",allowScriptAccess:s.allowScriptAccess,bgcolor:s.bgColor,pluginspage:un+"www.macromedia.com/go/getflashplayer",title:u,type:"application/x-shockwave-flash",wmode:s.wmode,hasPriority:"true"};s.debugFlash&&(v.FlashVars="debug=1");s.wmode||delete v.wmode;if(Xt){m=d.createElement("div");b=['<object id="'+e+'" data="'+n+'" type="'+v.type+'" title="'+v.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+un+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',C("movie",n),C("AllowScriptAccess",s.allowScriptAccess),C("quality",v.quality),s.wmode?C("wmode",s.wmode):"",C("bgcolor",s.bgColor),C("hasPriority","true"),s.debugFlash?C("FlashVars",v.FlashVars):"","</object>"].join("")}else{m=d.createElement("embed");for(y in v)v.hasOwnProperty(y)&&m.setAttribute(y,v[y])}Q();f=ot();a=V();if(a){s.oMC=c(s.movieID)||d.createElement("div");if(!s.oMC.id){s.oMC.id=s.movieID;s.oMC.className=ut.swfDefault+" "+f;E=null;w=null;if(!s.useFlashBlock)if(s.useHighPerformance)E={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"};else{E={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"};l&&(E.left=Math.abs(parseInt(E.left,10))+"px")}Vt&&(s.oMC.style.zIndex=1e4);if(!s.debugFlash)for(T in E)E.hasOwnProperty(T)&&(s.oMC.style[T]=E[T]);try{Xt||s.oMC.appendChild(m);a.appendChild(s.oMC);if(Xt){w=s.oMC.appendChild(d.createElement("div"));w.className=ut.swfBox;w.innerHTML=b}x=!0}catch(k){throw new Error(it("domError")+" \n"+k.toString())}}else{N=s.oMC.className;s.oMC.className=(N?N+" ":ut.swfDefault)+(f?" "+f:"");s.oMC.appendChild(m);if(Xt){w=s.oMC.appendChild(d.createElement("div"));w.className=ut.swfBox;w.innerHTML=b}x=!0}}S=!0;r();return!0};R=function(){if(s.html5Only){$();return!1}if(u)return!1;if(!s.url)return!1;u=s.getMovie(s.id);if(!u){if(!nt)$(s.id,s.url);else{Xt?s.oMC.innerHTML=rt:s.oMC.appendChild(nt);nt=null;S=!0}u=s.getMovie(s.id)}typeof s.oninitmovie=="function"&&setTimeout(s.oninitmovie,1);return!0};B=function(){setTimeout(j,1e3)};j=function(){var t,n=!1;if(!s.url)return!1;if(pt)return!1;pt=!0;Mt.remove(e,"load",B);if(en&&!Zt)return!1;if(!T){t=s.getMoviePercent();t>0&&t<100&&(n=!0)}setTimeout(function(){t=s.getMoviePercent();if(n){pt=!1;e.setTimeout(B,1);return!1}!T&&tn&&(t===null?s.useFlashBlock||s.flashLoadTimeout===0?s.useFlashBlock&&st():!s.useFlashBlock&&St?e.setTimeout(function(){s.setup({preferFlash:!1}).reboot();s.didFlashBlock=!0;s.beginDelayedInit()},1):P({type:"ontimeout",ignoreInit:!0}):s.flashLoadTimeout!==0&&et(!0))},s.flashLoadTimeout)};I=function(){function t(){Mt.remove(e,"focus",I)}if(Zt||!en){t();return!0}tn=!0;Zt=!0;pt=!1;B();t();return!0};qt=function(){};It=function(){};A=function(t){if(T)return!1;if(s.html5Only){T=!0;H();return!0}var n=s.useFlashBlock&&s.flashLoadTimeout&&!s.getMoviePercent(),r=!0,i;if(!n){T=!0;N&&(i={type:!Ht&&xt?"NO_FLASH":"INIT_TIMEOUT"})}if(N||t){s.useFlashBlock&&s.oMC&&(s.oMC.className=ot()+" "+(s.getMoviePercent()===null?ut.swfTimedout:ut.swfError));P({type:"ontimeout",error:i,ignoreInit:!0});J(i);r=!1}N||(s.waitForWindowLoad&&!C?Mt.add(e,"load",H):H());return r};m=function(){var e,n=s.setupOptions;for(e in n)n.hasOwnProperty(e)&&(s[e]===t?s[e]=n[e]:s[e]!==n[e]&&(s.setupOptions[e]=s[e]))};g=function(){function t(){Mt.remove(e,"load",s.beginDelayedInit)}if(T)return!1;if(s.html5Only){if(!T){t();s.enabled=!0;A()}return!0}R();try{u._externalInterfaceTest(!1);K(!0,s.flashPollingInterval||(s.useHighPerformance?10:50));s.debugMode||u._disableDebug();s.enabled=!0;s.html5Only||Mt.add(e,"unload",v)}catch(n){J({type:"JS_TO_FLASH_EXCEPTION",fatal:!0});et(!0);A();return!1}A();t();return!0};z=function(){if(X)return!1;X=!0;m();Q();!Ht&&s.hasHTML5&&s.setup({useHTML5Audio:!0,preferFlash:!1});Ot();if(!Ht&&xt){Et.push(q.needFlash);s.setup({flashLoadTimeout:1})}d.removeEventListener&&d.removeEventListener("DOMContentLoaded",z,!1);R();return!0};At=function(){if(d.readyState==="complete"){z();d.detachEvent("onreadystatechange",At)}return!0};W=function(){C=!0;Mt.remove(e,"load",W)};U=function(){if(Qt){s.setupOptions.useHTML5Audio=!0;s.setupOptions.preferFlash=!1;if(zt||Wt&&!h.match(/android\s2\.3/i)){zt&&(s.ignoreFlash=!0);Dt=!0}}};U();Bt();Mt.add(e,"focus",I);Mt.add(e,"load",B);Mt.add(e,"load",W);d.addEventListener?d.addEventListener("DOMContentLoaded",z,!1):d.attachEvent?d.attachEvent("onreadystatechange",At):J({type:"NO_DOM2_EVENTS",fatal:!0})}var n=null;if(e.SM2_DEFER===undefined||!SM2_DEFER)n=new r;e.SoundManager=r;e.soundManager=n})(window);var br_sm2=function(){function t(t){console.log("setting up sm2 ********");soundManager.setup(e);soundManager.onready(function(){t()})}function n(e){var t=e.sampleTrack?badracket.stringToTime("0:30"):badracket.stringToTime(br_player.state.currSong.duration),n=e.position,r=br_player.state.isSliding;playbarWidth=(n/t*100).toFixed(2)+"%";if(!r&&br_player.state.currSong.sm2_obj===e){br_player.ui.el.progressBar.css("width",playbarWidth);br_player.ui.el.progressTime.text(badracket.msToTime(n))}}function r(e){console.log("on finish ran");e.setPosition(0);br_player.ui.handlers.nextPrev("next");br_mixpanel.track("Song Ended",{songUrl:e.url,duration:badracket.msToTime(e.duration)});mixpanel.people.increment("Songs finished",1)}function o(e,t){console.log("create sound ran");mixpanel.people.increment("Songs started",1);br_mixpanel.track("Song started");return t?soundManager.createSound({id:"brSound"+i++,url:e.songUrl,autoLoad:!0}):soundManager.createSound({id:"brSound"+i++,url:e.songUrl,autoLoad:!0,onplay:function(){br_player.state.isPlaying=!0;$(window).trigger("sm2-play-event")},onresume:function(){br_player.state.isPlaying=!0;$(window).trigger("sm2-play-event")},onpause:function(){br_player.state.isPlaying=!1},onstop:function(){br_player.state.isPlaying=!1},whileplaying:function(){n(this)},onfinish:function(){r(this)}})}function u(){var e=br_player.history.song.lastPlayed();typeof e!="undefined"&&"sm2_obj"in e&&e.sm2_obj.loaded===!1&&e.sm2_obj.unload()}function a(e,t,n){console.log("play-pause ran");u();"sm2_obj"in e||(e.sm2_obj=o(e,n));if(e.isSampleTrack==0&&!$("html").hasClass("fb-logged-in")){br_player.logic.attach30SecondListener(e);e.sm2_obj.sampleTrack=!0}else{e.sm2_obj.sampleTrack=!1;br_player.logic.remove30SecondListener(e)}br_player.ui.render.sampleState(e);t?e.sm2_obj.pause():e.sm2_obj.togglePause()}var e={url:BR_ENV==="prod"?s.domain+"swf":"/brv5-prod/swf",flashVersion:9,debugMode:!1,flashPollingInterval:125,html5PollingInterval:125,useHighPerformance:!0},i=0;return{setup:t,createSound:o,playPause:a,onFinish:r}}(),br_inline_player=function(){function t(t){var n;_.each(e,function(e){e.songUrl===t&&(n=e)});return n}var e=[],n={playClick:function(){console.log("inline-play-click-bound");s.bd.on({click:function(e){r.playClick(e)}},".inline-play-pause")}},r={playClick:function(n){var r=$(n.target).closest(".inline-player"),i=r.data("song-url"),s=t(i),o=r.find(".inline-play-pause");$(window).trigger("vimeo-play-event",i);if(s){s.sm2_obj.togglePause();var u=s.sm2_obj.paused?"m":"n";o.attr("data-icon",u)}else{var a={songUrl:i};e.push(a);br_sm2.playPause(a,!1,!0);o.attr("data-icon","n");$(window).on("sm2-play-event vimeo-play-event",function(e,t){if(t===a.songUrl)return!1;a.sm2_obj.pause();o.attr("data-icon","m")})}}};return{bindUI:n}}();br_inline_player.bindUI.playClick();var br_player=function(){var e={isPreviewSong:!1,isSliding:!1,isPlaying:!1,currSong:null,currAlbum:null},t=function(){var t={playerWrapper:$(".audio-player-wrapper"),player:$(".audio-player"),song:$(".audio-player .song"),artist:$(".audio-player .artist"),albumLink:$(".audio-player .view-full-album"),progressBar:$(".audio-player .progress-bar"),progressTime:$(".audio-player .progress-time"),currentTrack:$(".audio-player .current-track"),totalTracks:$(".audio-player .total-tracks"),slider:$(".slider"),playButton:$(".play-pause"),prevButton:$(".previous"),nextButton:$(".next"),ctaWrap:$(".support-band"),ctaButton:$(".support-band-button")},o={play:"m",pause:"n",speaker:"s"},u={init:function(e,n){t.player.addClass("ready");if(e.kind==="show"){t.artist.html(n.artist);var r=date("M j",new Date(e.date.split(" ")[0]));t.albumLink.find(".show").text("Playing "+r+": ").show();t.albumLink.find(".target").text("view show");t.albumLink.find(".track-count").hide();t.ctaWrap.attr("data-toggle","none");t.ctaWrap.attr("href",e.albumUrl);t.ctaButton.text("Get Tickets");t.ctaButton.removeClass("get-album")}else{n.isSampleTrack!=1&&!$("html").hasClass("fb-logged-in")?t.player.addClass("preview-song"):t.player.removeClass("preview-song");t.albumLink.find(".show").hide();t.artist.html(e.artist);t.albumLink.find(".track-count").show();t.albumLink.find(".target").text("View album");t.ctaWrap.attr("data-toggle","modal");t.ctaWrap.attr("href","#buy-album-form");t.ctaButton.text("Get Album");t.ctaButton.addClass("get-album")}t.song.html(n.songTitle);t.progressBar.css("width","0%");t.progressTime.html(n.duration);t.albumLink.attr("href",e.albumUrl);t.currentTrack.html(parseInt(n.trackNumber,10));t.totalTracks.html(e.tracks.length)},playState:function(){var n=e.isPlaying?o.pause:o.play;t.playButton.attr("data-icon",n)},sampleState:function(e){e.isSampleTrack!=1&&!$("html").hasClass("fb-logged-in")?t.player.addClass("preview-song"):t.player.removeClass("preview-song")},updateTime:function(e){t.progressTime.html(e)}},a={playClick:function(){br_player.logic.targetSong(e.currAlbum,e.currSong);u.playState();br_mixpanel.track("Click: Play / Pause")},albumClick:function(e){var t=$(e.target);if(br_state.viewGet()==="album-detail"||t.closest("a").hasClass("link-to-album"))return!1;e.preventDefault();e.stopPropagation();var i=t.closest(".album").attr("data-album-title"),s=r.getAlbumByName(i),o=r.sampleSong(s);n.targetSong(s,o);br_mixpanel.track("Click: Album",{albumTitle:i})
},songClick:function(e){var t=$("[data-album-title]").attr("data-album-title"),i=r.getAlbumByName(t),s=parseInt($(e.target).closest(".song").attr("data-track-number"),10)-1,o=i.tracks[s];n.targetSong(i,o);br_mixpanel.track("Click: Song",{songTitle:o.songTitle})},nextPrev:function(e){var t,r;if(e==="next"){t=i.song.next();n.targetSong(t[0],t[1])}else{previousAlbumSong=i.song.previous();n.targetSong(previousAlbumSong[0],previousAlbumSong[1])}br_mixpanel.track("Click: Next / Previous")},buyAlbum:function(e){e.preventDefault();var t=br_player.state.currAlbum,n=t.albumName,r=t.zipFile,i="$"+t.price+".00",s=t.price*100,o=t.artist,u=t.coverUrl;parseInt(t.price,10)===0?badracket.setupDownloadForm(u,n,o,i,r):badracket.setupPayForm(u,n,o,i,r);br_mixpanel.track("Click: Buy Album")},buyAlbumHover:function(){function e(){console.log("yep");s.bd.off("hover",".support-band-button")}badracket.loader.require([badracket_theme_path+"/js/prod/payments-min.js"],e())},buyAlbumDetail:function(e){e.preventDefault();var t=$("[data-album-title]").attr("data-album-title"),n=br_player.albumData.getAlbumByName(t),r=n.albumName,i=n.zipFile,s="$"+n.price+".00",o=n.price*100,u=n.artist,a=n.coverUrl;console.log(n);parseInt(n.price,10)===0?badracket.setupDownloadForm(a,r,u,s,i):badracket.setupPayForm(a,r,u,s,i);br_mixpanel.track("Click: Buy Album")},whileSliding:function(e,n,r){t.progressBar.css("width",n.value+"%")},slideStart:function(){e.isSliding=!0;br_mixpanel.track("Drag: Progress bar")},slideStop:function(t,n){e.isSliding=!1;var r;br_player.state.currSong.isSampleTrack==0&&!$("html").hasClass("fb-logged-in")?r=n.value/100*3e4:r=n.value/100*badracket.stringToTime(e.currSong.duration);e.currSong.sm2_obj.setPosition(r)},rewind:function(){s=br_player.history.song.current();s.sm2_obj&&s.sm2_obj.setPosition(0)}},f={play:function(){s.bd.on({click:function(){a.playClick()}},".play-pause")},next:function(){s.bd.on({click:function(){a.nextPrev("next")}},".audio-player .next")},previous:function(){s.bd.on({click:function(){a.nextPrev("prev")}},".previous")},album:function(){s.bd.on({click:function(e){a.albumClick(e)}},".album")},song:function(){s.bd.on({click:function(e){a.songClick(e)}},".song")},buyAlbum:function(){s.bd.on({click:function(e){a.buyAlbum(e)}},".get-album")},buyAlbumDetail:function(){s.bd.on({click:function(e){a.buyAlbumDetail(e)}},".buy-album-detail")},buyAlbumHover:function(){s.bd.on({hover:function(e){a.buyAlbumHover(e)}},".support-band-button, .buy-album-detail")},slider:function(){t.slider.slider({step:.01,slide:function(e,t){a.whileSliding(e,t)},start:function(){a.slideStart()},stop:function(e,t){a.slideStop(e,t)}})}};return{el:t,handlers:a,bindui:f,render:u}}(),n=function(){function n(e,t,n){var r=$('.song[data-track-number="'+t.trackNumber+'"]'),i=$('.album[data-album-title="'+e.albumName+'"]'),s=br_state.viewGet();console.log(s);s==="album-detail"||s==="show-detail"?$("[data-album-title]").attr("data-album-title")===e.albumName&&(n==="toggle"?r.toggleClass("song-playing"):r.removeClass("song-playing")):n==="toggle"?i.toggleClass("playing"):i.removeClass("playing")}function r(r,s,o){if(s.songTitle!==e.currSong.songTitle){typeof e.currSong.sm2_obj!="undefined"&&e.currSong.sm2_obj.setPosition(0);t.render.init(r,s);n(e.currAlbum,e.currSong,"clear");e.isPlaying&&e.currSong.sm2_obj.stop();i.update(r,s)}n(r,s,"toggle");br_sm2.playPause(s,o);t.render.playState()}function s(e){var t=e.sm2_obj;t.onPosition(26e3,function(e){u(t)});t.onPosition(3e4,function(){br_sm2.onFinish(e.sm2_obj)})}function o(e){var t=e.sm2_obj;t.clearOnPosition(26e3);t.clearOnPosition(3e4)}function u(e){var t=e.volume;if(t===0){setTimeout(function(){e.setVolume(100)},1e3);return!1}e.setVolume(Math.min(100,t-1));setTimeout(function(){u(e)},40)}return{targetSong:r,attach30SecondListener:s,remove30SecondListener:o}}(),r=function(){function n(n){e=e.concat(n);t=e.length}function r(n){for(var r=t;r--;)if(e[r].albumName===n)return e[r]}function i(e){var t=e.tracks;for(var n=0;n<t.length;n++)if(parseInt(t[n].isSampleTrack,10)==1)return t[n]}var e=[],t;return{getAlbumByName:r,sampleSong:i,set:n,get:function(){return e}}}(),i=function(){function o(e,i){n=r.get().indexOf(e);s=e.tracks.indexOf(i);t.push([n,s]);a(e,i);console.log("updatehistory ran")}function u(){return t}function a(t,n){console.log(e);e.currAlbum=t;e.currSong=n}function f(){return t.length}var t=[],n,s,l=function(){function e(){return r.get()[n]}function t(){return r.get()[n+1]}function i(){return r.get()[n-1]}function s(){var e=br_player.albumData.get();return e[Math.round(Math.random(0,e.length))]}return{current:e,next:t,previous:i,random:s}}(),c=function(){function o(){return r.get()[n].tracks[s]}function h(){u=r.get();a=u.length;f=e.currAlbum.tracks.length;l=i.album.next();c=i.album.previous()}function p(){h();var t=s+1;if(t>=f){if(n>=a-1){var r=u[0],i=r.tracks[0];return[r,i]}var o=l.tracks[0];return[l,o]}nextSong=e.currAlbum.tracks[t];return[e.currAlbum,nextSong]}function d(){h();var t=s-1;if(t<0){if(n<=0){var r=u[a-1],i=r.tracks[r.tracks.length-1];return[r,i]}var o=c.tracks[c.tracks.length-1];return[c,o]}previousSong=e.currAlbum.tracks[t];return[e.currAlbum,previousSong]}function v(){var e=t[t.length-2],n,i;if(typeof e!="undefined"){n=e[0],i=e[1];return r.get()[n].tracks[i]}}var u,a,f,l,c;return{current:o,next:p,previous:d,lastPlayed:v}}();return{get:u,update:o,length:f,album:l,song:c}}();return{state:e,ui:t,logic:n,albumData:r,history:i}}();$.subscribe("/view/change",updateView("/view/change"));var init=function(){function t(){console.log("trying to load sm");typeof soundManager!="undefined"?br_sm2.setup(n):setTimeout(function(){t()},125)}function n(){console.log("Soundmanager ready");e.sm=!0;$(window).on("vimeo-play-event",function(){var e=br_player.state.currAlbum,t=br_player.state.currSong;br_player.logic.targetSong(e,t,!0)});i()}function r(t){console.log("Album data ready");e[t]=!0;i()}function i(){if(!e.sm||!e.album||!e.show)return;console.log("everything is loaded");doMoreStuff()}var e={sm:!1,album:!1,show:!1};return{loadSM:t,dataReady:r,readyState:e,init:init}}();init.loadSM();