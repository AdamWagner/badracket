function updateView(){return function(a,b){br_state.viewSet(b)}}function doMoreStuff(){console.log("do more stuff ran");var a=br_player.history.album.random(),b=br_player.albumData.sampleSong(a);br_player.history.update(a,b),br_player.ui.render.init(a,b),br_player.ui.bindui.album(),br_player.ui.bindui.song(),br_player.ui.bindui.slider(),br_player.ui.bindui.play(),br_player.ui.bindui.next(),br_player.ui.bindui.buyAlbum(),br_player.ui.bindui.buyAlbumDetail(),br_player.ui.bindui.buyAlbumHover(),br_player.ui.bindui.previous()}!function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().andSelf().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),function(){var b=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=b.length?!0:!1,a.ui.ie6=6===parseFloat(b[1],10)}(),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i=b.split(".")[0];b=b.split(".")[1],e=i+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[i]=a[i]||{},f=a[i][b],g=a[i][b]=function(a,b){return this._createWidget?(arguments.length&&this._createWidget(a,b),void 0):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,e){a.isFunction(e)&&(d[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},d=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=d,b=e.apply(this,arguments),this._super=c,this._superApply=f,b}}())}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix:b},d,{constructor:g,namespace:i,widgetName:b,widgetBaseClass:e,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; "+"attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetName,this),a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&(a.effects.effect[h]||a.uiBackCompat!==!1&&a.effects[h])?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.uiBackCompat!==!1&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return!a.ui.ie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var c,d,e=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),g="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",h=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(e.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),e.range&&(e.range===!0&&(e.values||(e.values=[this._valueMin(),this._valueMin()]),e.values.length&&2!==e.values.length&&(e.values=[e.values[0],e.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))),d=e.values&&e.values.length||1,c=f.length;d>c;c++)h.push(g);this.handles=f.add(a(h.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).mouseenter(function(){e.disabled||a(this).addClass("ui-state-hover")}).mouseleave(function(){a(this).removeClass("ui-state-hover")}).focus(function(){e.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)}),this._on(this.handles,{keydown:function(c){var d,e,f,g,h=a(c.target).data("ui-slider-handle-index");switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(c.target).addClass("ui-state-active"),d=this._start(c,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),c.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(c,h,f)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));e>c&&(e=c,f=a(this),g=b)}),l.range===!0&&this.values(1)===l.min&&(g+=1,f=a(this.handles[g])),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))}})}(jQuery),function(a,b){"use strict";function c(c,d){function e(a){return mb.preferFlash&&fb&&!mb.ignoreFlash&&mb.flash[a]!==b&&mb.flash[a]}function f(a){return function(b){var c,d=this._s;return c=d&&d._a?a.call(this,b):null}}this.setupOptions={url:c||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=d||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20130512",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb=this,nb=null,ob=null,pb=navigator.userAgent,qb=a.location.href.toString(),rb=document,sb=[],tb=!1,ub=!1,vb=!1,wb=!1,xb=!1,yb=8,zb=null,Ab=null,Bb=!1,Cb=!1,Db=0,Eb=null,Fb=[],Gb=null,Hb=Array.prototype.slice,Ib=!1,Jb=0,Kb=pb.match(/(ipad|iphone|ipod)/i),Lb=pb.match(/android/i),Mb=pb.match(/msie/i),Nb=pb.match(/webkit/i),Ob=pb.match(/safari/i)&&!pb.match(/chrome/i),Pb=pb.match(/opera/i),Qb=pb.match(/firefox/i),Rb=pb.match(/(mobile|pre\/|xoom)/i)||Kb||Lb,Sb=!qb.match(/usehtml5audio/i)&&!qb.match(/sm2\-ignorebadua/i)&&Ob&&!pb.match(/silk/i)&&pb.match(/OS X 10_6_([3-7])/i),Tb=(a.console!==b&&console.log!==b,rb.hasFocus!==b?rb.hasFocus():null),Ub=Ob&&(rb.hasFocus===b||!rb.hasFocus()),Vb=!Ub,Wb=/(mp3|mp4|mpa|m4a|m4b)/i,Xb=1e3,Yb="about:blank",Zb=rb.location?rb.location.protocol.match(/http/i):null,$b=Zb?"":"http://",_b=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,ac=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],bc=new RegExp("\\.("+ac.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Zb,O={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==b&&(Pb&&opera!==b&&opera.version()<10?new Audio(null):new Audio).canPlayType!==b}catch(a){return!1}}(),this.setup=function(a){var c=!mb.url;return a!==b&&vb&&Gb&&mb.ok()&&(a.flashVersion!==b||a.url!==b||a.html5Test!==b),o(a),a&&(c&&C&&a.url!==b&&mb.beginDelayedInit(),C||a.url===b||"complete"!==rb.readyState||setTimeout(A,1)),mb},this.ok=function(){return Gb?vb&&!wb:mb.useHTML5Audio&&mb.hasHTML5},this.supported=this.ok,this.getMovie=function(b){return h(b)||rb[b]||a[b]},this.createSound=function(a,c){function d(){return f=P(f),mb.sounds[f.id]=new g(f),mb.soundIDs.push(f.id),mb.sounds[f.id]}var e,f,h=null;if(!vb||!mb.ok())return!1;if(c!==b&&(a={id:a,url:c}),f=n(a),f.url=W(f.url),void 0===f.id&&(f.id=mb.setupOptions.idPrefix+Jb++),S(f.id,!0))return mb.sounds[f.id];if(Z(f))h=d(),h._setup_html5(f);else{if(mb.html5Only)return d();if(mb.html5.usingFlash&&f.url&&f.url.match(/data\:/i))return d();l>8&&null===f.isMovieStar&&(f.isMovieStar=!!(f.serverURL||(f.type?f.type.match(_b):!1)||f.url&&f.url.match(bc))),f=Q(f,e),h=d(),8===l?ob._createSound(f.id,f.loops||1,f.usePolicyFile):(ob._createSound(f.id,f.url,f.usePeakData,f.useWaveformData,f.useEQData,f.isMovieStar,f.isMovieStar?f.bufferTime:!1,f.loops||1,f.serverURL,f.duration||null,f.autoPlay,!0,f.autoLoad,f.usePolicyFile),f.serverURL||(h.connected=!0,f.onconnect&&f.onconnect.apply(h))),f.serverURL||!f.autoLoad&&!f.autoPlay||h.load(f)}return!f.serverURL&&f.autoPlay&&h.play(),h},this.destroySound=function(a,b){if(!S(a))return!1;var c,d=mb.sounds[a];for(d._iO={},d.stop(),d.unload(),c=0;c<mb.soundIDs.length;c++)if(mb.soundIDs[c]===a){mb.soundIDs.splice(c,1);break}return b||d.destruct(!0),d=null,delete mb.sounds[a],!0},this.load=function(a,b){return S(a)?mb.sounds[a].load(b):!1},this.unload=function(a){return S(a)?mb.sounds[a].unload():!1},this.onPosition=function(a,b,c,d){return S(a)?mb.sounds[a].onposition(b,c,d):!1},this.onposition=this.onPosition,this.clearOnPosition=function(a,b,c){return S(a)?mb.sounds[a].clearOnPosition(b,c):!1},this.play=function(a,b){var c=null,d=b&&!(b instanceof Object);if(!vb||!mb.ok())return!1;if(S(a,d))d&&(b={url:b});else{if(!d)return!1;d&&(b={url:b}),b&&b.url&&(b.id=a,c=mb.createSound(b).play())}return null===c&&(c=mb.sounds[a].play(b)),c},this.start=this.play,this.setPosition=function(a,b){return S(a)?mb.sounds[a].setPosition(b):!1},this.stop=function(a){return S(a)?mb.sounds[a].stop():!1},this.stopAll=function(){var a;for(a in mb.sounds)mb.sounds.hasOwnProperty(a)&&mb.sounds[a].stop()},this.pause=function(a){return S(a)?mb.sounds[a].pause():!1},this.pauseAll=function(){var a;for(a=mb.soundIDs.length-1;a>=0;a--)mb.sounds[mb.soundIDs[a]].pause()},this.resume=function(a){return S(a)?mb.sounds[a].resume():!1},this.resumeAll=function(){var a;for(a=mb.soundIDs.length-1;a>=0;a--)mb.sounds[mb.soundIDs[a]].resume()},this.togglePause=function(a){return S(a)?mb.sounds[a].togglePause():!1},this.setPan=function(a,b){return S(a)?mb.sounds[a].setPan(b):!1},this.setVolume=function(a,b){return S(a)?mb.sounds[a].setVolume(b):!1},this.mute=function(a){var b=0;if(a instanceof String&&(a=null),a)return S(a)?mb.sounds[a].mute():!1;for(b=mb.soundIDs.length-1;b>=0;b--)mb.sounds[mb.soundIDs[b]].mute();return mb.muted=!0,!0},this.muteAll=function(){mb.mute()},this.unmute=function(a){var b;if(a instanceof String&&(a=null),a)return S(a)?mb.sounds[a].unmute():!1;for(b=mb.soundIDs.length-1;b>=0;b--)mb.sounds[mb.soundIDs[b]].unmute();return mb.muted=!1,!0},this.unmuteAll=function(){mb.unmute()},this.toggleMute=function(a){return S(a)?mb.sounds[a].toggleMute():!1},this.getMemoryUse=function(){var a=0;return ob&&8!==l&&(a=parseInt(ob._getMemoryUse(),10)),a},this.disable=function(c){var d;if(c===b&&(c=!1),wb)return!1;for(wb=!0,d=mb.soundIDs.length-1;d>=0;d--)I(mb.sounds[mb.soundIDs[d]]);return m(c),db.remove(a,"load",s),!0},this.canPlayMIME=function(a){var b;return mb.hasHTML5&&(b=$({type:a})),!b&&Gb&&(b=a&&mb.ok()?!!((l>8?a.match(_b):null)||a.match(mb.mimePattern)):null),b},this.canPlayURL=function(a){var b;return mb.hasHTML5&&(b=$({url:a})),!b&&Gb&&(b=a&&mb.ok()?!!a.match(mb.filePattern):null),b},this.canPlayLink=function(a){return a.type!==b&&a.type&&mb.canPlayMIME(a.type)?!0:mb.canPlayURL(a.href)},this.getSoundById=function(a){if(!a)return null;
var b=mb.sounds[a];return b},this.onready=function(b,c){var d="onready",e=!1;if("function"!=typeof b)throw L("needFunction",d);return c||(c=a),q(d,b,c),r(),e=!0,e},this.ontimeout=function(b,c){var d="ontimeout",e=!1;if("function"!=typeof b)throw L("needFunction",d);return c||(c=a),q(d,b,c),r({type:d}),e=!0,e},this._writeDebug=function(){return!0},this._wD=this._writeDebug,this._debug=function(){},this.reboot=function(b,c){var d,e,f;for(d=mb.soundIDs.length-1;d>=0;d--)mb.sounds[mb.soundIDs[d]].destruct();if(ob)try{Mb&&(Ab=ob.innerHTML),zb=ob.parentNode.removeChild(ob)}catch(g){}if(Ab=zb=Gb=ob=null,mb.enabled=C=vb=Bb=Cb=tb=ub=wb=Ib=mb.swfLoaded=!1,mb.soundIDs=[],mb.sounds={},Jb=0,b)sb=[];else for(d in sb)if(sb.hasOwnProperty(d))for(e=0,f=sb[d].length;f>e;e++)sb[d][e].fired=!1;return mb.html5={usingFlash:null},mb.flash={},mb.html5Only=!1,mb.ignoreFlash=!1,a.setTimeout(function(){z(),c||mb.beginDelayedInit()},20),mb},this.reset=function(){return mb.reboot(!0,!0)},this.getMoviePercent=function(){return ob&&"PercentLoaded"in ob?ob.PercentLoaded():null},this.beginDelayedInit=function(){xb=!0,A(),setTimeout(function(){return Cb?!1:(E(),y(),Cb=!0,!0)},20),t()},this.destruct=function(){mb.disable(!0)},g=function(a){var c,d,e,f,g,h,i,j,k,m,o=this,p=!1,q=[],r=0,s=null;k={duration:null,time:null},this.id=a.id,this.sID=this.id,this.url=a.url,this.options=n(a),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,m=this.url?!1:!0,this.id3={},this._debug=function(){},this.load=function(a){var c,d=null;if(a!==b?o._iO=n(a,o.options):(a=o.options,o._iO=a,s&&s!==o.url&&(o._iO.url=o.url,o.url=null)),o._iO.url||(o._iO.url=o.url),o._iO.url=W(o._iO.url),o.instanceOptions=o._iO,c=o._iO,!c.url&&!o.url)return o;if(c.url===o.url&&0!==o.readyState&&2!==o.readyState)return 3===o.readyState&&c.onload&&lb(o,function(){c.onload.apply(o,[!!o.duration])}),o;if(o.loaded=!1,o.readyState=1,o.playState=0,o.id3={},Z(c))d=o._setup_html5(c),d._called_load||(o._html5_canplay=!1,o.url!==c.url&&(o._a.src=c.url,o.setPosition(0)),o._a.autobuffer="auto",o._a.preload="auto",o._a._called_load=!0,c.autoPlay&&o.play());else{if(mb.html5Only)return o;if(o._iO.url&&o._iO.url.match(/data\:/i))return o;try{o.isHTML5=!1,o._iO=Q(P(c)),c=o._iO,8===l?ob._load(o.id,c.url,c.stream,c.autoPlay,c.usePolicyFile):ob._load(o.id,c.url,!!c.stream,!!c.autoPlay,c.loops||1,!!c.autoLoad,c.usePolicyFile)}catch(e){F({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return o.url=c.url,o},this.unload=function(){return 0!==o.readyState&&(o.isHTML5?(f(),o._a&&(o._a.pause(),s=ab(o._a))):8===l?ob._unload(o.id,Yb):ob._unload(o.id),c()),o},this.destruct=function(a){o.isHTML5?(f(),o._a&&(o._a.pause(),ab(o._a),Ib||e(),o._a._s=null,o._a=null)):(o._iO.onfailure=null,ob._destroySound(o.id)),a||mb.destroySound(o.id,!0)},this.play=function(a,c){var d,e,f,i,k,q,r=!0,s=null;if(c=c===b?!0:c,a||(a={}),o.url&&(o._iO.url=o.url),o._iO=n(o._iO,o.options),o._iO=n(a,o._iO),o._iO.url=W(o._iO.url),o.instanceOptions=o._iO,!o.isHTML5&&o._iO.serverURL&&!o.connected)return o.getAutoPlay()||o.setAutoPlay(!0),o;if(Z(o._iO)&&(o._setup_html5(o._iO),g()),1!==o.playState||o.paused||(d=o._iO.multiShot,d||(o.isHTML5&&o.setPosition(o._iO.position),s=o)),null!==s)return s;if(a.url&&a.url!==o.url&&(o.readyState||o.isHTML5||8!==l||!m?o.load(o._iO):m=!1),o.loaded||(0===o.readyState?(o.isHTML5||mb.html5Only?o.isHTML5?o.load(o._iO):s=o:(o._iO.autoPlay=!0,o.load(o._iO)),o.instanceOptions=o._iO):2===o.readyState&&(s=o)),null!==s)return s;if(!o.isHTML5&&9===l&&o.position>0&&o.position===o.duration&&(a.position=0),o.paused&&o.position>=0&&(!o._iO.serverURL||o.position>0))o.resume();else{if(o._iO=n(a,o._iO),null!==o._iO.from&&null!==o._iO.to&&0===o.instanceCount&&0===o.playState&&!o._iO.serverURL){if(f=function(){o._iO=n(a,o._iO),o.play(o._iO)},o.isHTML5&&!o._html5_canplay?(o.load({oncanplay:f}),s=!1):o.isHTML5||o.loaded||o.readyState&&2===o.readyState||(o.load({onload:f}),s=!1),null!==s)return s;o._iO=j()}(!o.instanceCount||o._iO.multiShotEvents||o.isHTML5&&o._iO.multiShot&&!Ib||!o.isHTML5&&l>8&&!o.getAutoPlay())&&o.instanceCount++,o._iO.onposition&&0===o.playState&&h(o),o.playState=1,o.paused=!1,o.position=o._iO.position===b||isNaN(o._iO.position)?0:o._iO.position,o.isHTML5||(o._iO=Q(P(o._iO))),o._iO.onplay&&c&&(o._iO.onplay.apply(o),p=!0),o.setVolume(o._iO.volume,!0),o.setPan(o._iO.pan,!0),o.isHTML5?o.instanceCount<2?(g(),e=o._setup_html5(),o.setPosition(o._iO.position),e.play()):(i=new Audio(o._iO.url),k=function(){db.remove(i,"onended",k),o._onfinish(o),ab(i),i=null},q=function(){db.remove(i,"canplay",q);try{i.currentTime=o._iO.position/Xb}catch(a){}i.play()},db.add(i,"ended",k),o._iO.position?db.add(i,"canplay",q):i.play()):(r=ob._start(o.id,o._iO.loops||1,9===l?o.position:o.position/Xb,o._iO.multiShot||!1),9!==l||r||o._iO.onplayerror&&o._iO.onplayerror.apply(o))}return o},this.start=this.play,this.stop=function(a){var b,c=o._iO;return 1===o.playState&&(o._onbufferchange(0),o._resetOnPosition(0),o.paused=!1,o.isHTML5||(o.playState=0),i(),c.to&&o.clearOnPosition(c.to),o.isHTML5?o._a&&(b=o.position,o.setPosition(0),o.position=b,o._a.pause(),o.playState=0,o._onTimer(),f()):(ob._stop(o.id,a),c.serverURL&&o.unload()),o.instanceCount=0,o._iO={},c.onstop&&c.onstop.apply(o)),o},this.setAutoPlay=function(a){o._iO.autoPlay=a,o.isHTML5||(ob._setAutoPlay(o.id,a),a&&(o.instanceCount||1!==o.readyState||o.instanceCount++))},this.getAutoPlay=function(){return o._iO.autoPlay},this.setPosition=function(a){a===b&&(a=0);var c,d,e=o.isHTML5?Math.max(a,0):Math.min(o.duration||o._iO.duration,Math.max(a,0));if(o.position=e,d=o.position/Xb,o._resetOnPosition(o.position),o._iO.position=e,o.isHTML5){if(o._a){if(o._html5_canplay){if(o._a.currentTime!==d)try{o._a.currentTime=d,(0===o.playState||o.paused)&&o._a.pause()}catch(f){}}else if(d)return o;o.paused&&o._onTimer(!0)}}else c=9===l?o.position:d,o.readyState&&2!==o.readyState&&ob._setPosition(o.id,c,o.paused||!o.playState,o._iO.multiShot);return o},this.pause=function(a){return o.paused||0===o.playState&&1!==o.readyState?o:(o.paused=!0,o.isHTML5?(o._setup_html5().pause(),f()):(a||a===b)&&ob._pause(o.id,o._iO.multiShot),o._iO.onpause&&o._iO.onpause.apply(o),o)},this.resume=function(){var a=o._iO;return o.paused?(o.paused=!1,o.playState=1,o.isHTML5?(o._setup_html5().play(),g()):(a.isMovieStar&&!a.serverURL&&o.setPosition(o.position),ob._pause(o.id,a.multiShot)),!p&&a.onplay?(a.onplay.apply(o),p=!0):a.onresume&&a.onresume.apply(o),o):o},this.togglePause=function(){return 0===o.playState?(o.play({position:9!==l||o.isHTML5?o.position/Xb:o.position}),o):(o.paused?o.resume():o.pause(),o)},this.setPan=function(a,c){return a===b&&(a=0),c===b&&(c=!1),o.isHTML5||ob._setPan(o.id,a),o._iO.pan=a,c||(o.pan=a,o.options.pan=a),o},this.setVolume=function(a,c){return a===b&&(a=100),c===b&&(c=!1),o.isHTML5?o._a&&(o._a.volume=Math.max(0,Math.min(1,a/100))):ob._setVolume(o.id,mb.muted&&!o.muted||o.muted?0:a),o._iO.volume=a,c||(o.volume=a,o.options.volume=a),o},this.mute=function(){return o.muted=!0,o.isHTML5?o._a&&(o._a.muted=!0):ob._setVolume(o.id,0),o},this.unmute=function(){o.muted=!1;var a=o._iO.volume!==b;return o.isHTML5?o._a&&(o._a.muted=!1):ob._setVolume(o.id,a?o._iO.volume:o.options.volume),o},this.toggleMute=function(){return o.muted?o.unmute():o.mute()},this.onPosition=function(a,c,d){return q.push({position:parseInt(a,10),method:c,scope:d!==b?d:o,fired:!1}),o},this.onposition=this.onPosition,this.clearOnPosition=function(a,b){var c;if(a=parseInt(a,10),isNaN(a))return!1;for(c=0;c<q.length;c++)a===q[c].position&&(b&&b!==q[c].method||(q[c].fired&&r--,q.splice(c,1)))},this._processOnPosition=function(){var a,b,c=q.length;if(!c||!o.playState||r>=c)return!1;for(a=c-1;a>=0;a--)b=q[a],!b.fired&&o.position>=b.position&&(b.fired=!0,r++,b.method.apply(b.scope,[b.position]));return!0},this._resetOnPosition=function(a){var b,c,d=q.length;if(!d)return!1;for(b=d-1;b>=0;b--)c=q[b],c.fired&&a<=c.position&&(c.fired=!1,r--);return!0},j=function(){var a,b,c=o._iO,d=c.from,e=c.to;return b=function(){o.clearOnPosition(e,b),o.stop()},a=function(){null===e||isNaN(e)||o.onPosition(e,b)},null===d||isNaN(d)||(c.position=d,c.multiShot=!1,a()),c},h=function(){var a,b=o._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&o.onPosition(parseInt(a,10),b[a])},i=function(){var a,b=o._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&o.clearOnPosition(parseInt(a,10))},g=function(){o.isHTML5&&T(o)},f=function(){o.isHTML5&&U(o)},c=function(a){a||(q=[],r=0),p=!1,o._hasTimer=null,o._a=null,o._html5_canplay=!1,o.bytesLoaded=null,o.bytesTotal=null,o.duration=o._iO&&o._iO.duration?o._iO.duration:null,o.durationEstimate=null,o.buffered=[],o.eqData=[],o.eqData.left=[],o.eqData.right=[],o.failures=0,o.isBuffering=!1,o.instanceOptions={},o.instanceCount=0,o.loaded=!1,o.metadata={},o.readyState=0,o.muted=!1,o.paused=!1,o.peakData={left:0,right:0},o.waveformData={left:[],right:[]},o.playState=0,o.position=null,o.id3={}},c(),this._onTimer=function(a){var b,c,d=!1,e={};return o._hasTimer||a?(o._a&&(a||(o.playState>0||1===o.readyState)&&!o.paused)&&(b=o._get_html5_duration(),b!==k.duration&&(k.duration=b,o.duration=b,d=!0),o.durationEstimate=o.duration,c=o._a.currentTime*Xb||0,c!==k.time&&(k.time=c,d=!0),(d||a)&&o._whileplaying(c,e,e,e,e)),d):void 0},this._get_html5_duration=function(){var a=o._iO,b=o._a&&o._a.duration?o._a.duration*Xb:a&&a.duration?a.duration:null,c=b&&!isNaN(b)&&1/0!==b?b:null;return c},this._apply_loop=function(a,b){a.loop=b>1?"loop":""},this._setup_html5=function(a){var b,e=n(o._iO,a),f=Ib?nb:o._a,g=decodeURI(e.url);if(Ib?g===decodeURI(eb)&&(b=!0):g===decodeURI(s)&&(b=!0),f){if(f._s)if(Ib)f._s&&f._s.playState&&!b&&f._s.stop();else if(!Ib&&g===decodeURI(s))return o._apply_loop(f,e.loops),f;b||(c(!1),f.src=e.url,o.url=e.url,s=e.url,eb=e.url,f._called_load=!1)}else o._a=e.autoLoad||e.autoPlay?new Audio(e.url):Pb&&opera.version()<10?new Audio(null):new Audio,f=o._a,f._called_load=!1,Ib&&(nb=f);return o.isHTML5=!0,o._a=f,f._s=o,d(),o._apply_loop(f,e.loops),e.autoLoad||e.autoPlay?o.load():(f.autobuffer=!1,f.preload="auto"),f},d=function(){function a(a,b,c){return o._a?o._a.addEventListener(a,b,c||!1):null}if(o._a._added_events)return!1;var b;o._a._added_events=!0;for(b in ib)ib.hasOwnProperty(b)&&a(b,ib[b]);return!0},e=function(){function a(a,b,c){return o._a?o._a.removeEventListener(a,b,c||!1):null}var b;o._a._added_events=!1;for(b in ib)ib.hasOwnProperty(b)&&a(b,ib[b])},this._onload=function(a){var b=!!a||!o.isHTML5&&8===l&&o.duration;return o.loaded=b,o.readyState=b?3:2,o._onbufferchange(0),o._iO.onload&&lb(o,function(){o._iO.onload.apply(o,[b])}),!0},this._onbufferchange=function(a){return 0===o.playState?!1:a&&o.isBuffering||!a&&!o.isBuffering?!1:(o.isBuffering=1===a,o._iO.onbufferchange&&o._iO.onbufferchange.apply(o),!0)},this._onsuspend=function(){return o._iO.onsuspend&&o._iO.onsuspend.apply(o),!0},this._onfailure=function(a,b,c){o.failures++,o._iO.onfailure&&1===o.failures&&o._iO.onfailure(o,a,b,c)},this._onfinish=function(){var a=o._iO.onfinish;o._onbufferchange(0),o._resetOnPosition(0),o.instanceCount&&(o.instanceCount--,o.instanceCount||(i(),o.playState=0,o.paused=!1,o.instanceCount=0,o.instanceOptions={},o._iO={},f(),o.isHTML5&&(o.position=0)),(!o.instanceCount||o._iO.multiShotEvents)&&a&&lb(o,function(){a.apply(o)}))},this._whileloading=function(a,b,c,d){var e=o._iO;o.bytesLoaded=a,o.bytesTotal=b,o.duration=Math.floor(c),o.bufferLength=d,o.durationEstimate=o.isHTML5||e.isMovieStar?o.duration:e.duration?o.duration>e.duration?o.duration:e.duration:parseInt(o.bytesTotal/o.bytesLoaded*o.duration,10),o.isHTML5||(o.buffered=[{start:0,end:o.duration}]),(3!==o.readyState||o.isHTML5)&&e.whileloading&&e.whileloading.apply(o)},this._whileplaying=function(a,c,d,e,f){var g,h=o._iO;return isNaN(a)||null===a?!1:(o.position=Math.max(0,a),o._processOnPosition(),!o.isHTML5&&l>8&&(h.usePeakData&&c!==b&&c&&(o.peakData={left:c.leftPeak,right:c.rightPeak}),h.useWaveformData&&d!==b&&d&&(o.waveformData={left:d.split(","),right:e.split(",")}),h.useEQData&&f!==b&&f&&f.leftEQ&&(g=f.leftEQ.split(","),o.eqData=g,o.eqData.left=g,f.rightEQ!==b&&f.rightEQ&&(o.eqData.right=f.rightEQ.split(",")))),1===o.playState&&(o.isHTML5||8!==l||o.position||!o.isBuffering||o._onbufferchange(0),h.whileplaying&&h.whileplaying.apply(o)),!0)},this._oncaptiondata=function(a){o.captiondata=a,o._iO.oncaptiondata&&o._iO.oncaptiondata.apply(o,[a])},this._onmetadata=function(a,b){var c,d,e={};for(c=0,d=a.length;d>c;c++)e[a[c]]=b[c];o.metadata=e,o._iO.onmetadata&&o._iO.onmetadata.apply(o)},this._onid3=function(a,b){var c,d,e=[];for(c=0,d=a.length;d>c;c++)e[a[c]]=b[c];o.id3=n(o.id3,e),o._iO.onid3&&o._iO.onid3.apply(o)},this._onconnect=function(a){a=1===a,o.connected=a,a&&(o.failures=0,S(o.id)&&(o.getAutoPlay()?o.play(b,o.getAutoPlay()):o._iO.autoLoad&&o.load()),o._iO.onconnect&&o._iO.onconnect.apply(o,[a]))},this._ondataerror=function(){o.playState>0&&o._iO.ondataerror&&o._iO.ondataerror.apply(o)}},D=function(){return rb.body||rb._docElement||rb.getElementsByTagName("div")[0]},h=function(a){return rb.getElementById(a)},n=function(a,c){var d,e,f=a||{};d=c===b?mb.defaultOptions:c;for(e in d)d.hasOwnProperty(e)&&f[e]===b&&(f[e]="object"!=typeof d[e]||null===d[e]?d[e]:n(f[e],d[e]));return f},lb=function(b,c){b.isHTML5||8!==l?c():a.setTimeout(c,0)},p={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},o=function(a,c){var d,e=!0,f=c!==b,g=mb.setupOptions,h=p;for(d in a)if(a.hasOwnProperty(d))if("object"!=typeof a[d]||null===a[d]||a[d]instanceof Array||a[d]instanceof RegExp)f&&h[c]!==b?mb[c][d]=a[d]:g[d]!==b?(mb.setupOptions[d]=a[d],mb[d]=a[d]):h[d]===b?e=!1:mb[d]instanceof Function?mb[d].apply(mb,a[d]instanceof Array?a[d]:[a[d]]):mb[d]=a[d];else{if(h[d]!==b)return o(a[d],d);e=!1}return e},db=function(){function b(a){var b=Hb.call(a),c=b.length;return f?(b[1]="on"+b[1],c>3&&b.pop()):3===c&&b.push(!1),b}function c(a,b){var c=a.shift(),d=[g[b]];f?c[d](a[0],a[1]):c[d].apply(c,a)}function d(){c(b(arguments),"add")}function e(){c(b(arguments),"remove")}var f=a.attachEvent,g={add:f?"attachEvent":"addEventListener",remove:f?"detachEvent":"removeEventListener"};return{add:d,remove:e}}(),ib={abort:f(function(){}),canplay:f(function(){var a,c=this._s;if(c._html5_canplay)return!0;if(c._html5_canplay=!0,c._onbufferchange(0),a=c._iO.position===b||isNaN(c._iO.position)?null:c._iO.position/Xb,c.position&&this.currentTime!==a)try{this.currentTime=a}catch(d){}c._iO._oncanplay&&c._iO._oncanplay()}),canplaythrough:f(function(){var a=this._s;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesLoaded,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),ended:f(function(){var a=this._s;a._onfinish()}),error:f(function(){this._s._onload(!1)}),loadeddata:f(function(){var a=this._s;a._loaded||Ob||(a.duration=a._get_html5_duration())}),loadedmetadata:f(function(){}),loadstart:f(function(){this._s._onbufferchange(1)}),play:f(function(){this._s._onbufferchange(0)}),playing:f(function(){this._s._onbufferchange(0)}),progress:f(function(a){var b,c,d=this._s,e=0,f=("progress"===a.type,a.target.buffered),g=a.loaded||0,h=a.total||1;if(d.buffered=[],f&&f.length){for(b=0,c=f.length;c>b;b++)d.buffered.push({start:f.start(b)*Xb,end:f.end(b)*Xb});e=(f.end(0)-f.start(0))*Xb,g=Math.min(1,e/(a.target.duration*Xb))}isNaN(g)||(d._onbufferchange(0),d._whileloading(g,h,d._get_html5_duration()),g&&h&&g===h&&ib.canplaythrough.call(this,a))}),ratechange:f(function(){}),suspend:f(function(a){var b=this._s;ib.progress.call(this,a),b._onsuspend()}),stalled:f(function(){}),timeupdate:f(function(){this._s._onTimer()}),waiting:f(function(){var a=this._s;a._onbufferchange(1)})},Z=function(a){var b;return b=a&&(a.type||a.url||a.serverURL)?a.serverURL||a.type&&e(a.type)?!1:a.type?$({type:a.type}):$({url:a.url})||mb.html5Only||a.url.match(/data\:/i):!1},ab=function(a){var b;return a&&(b=Ob&&!Kb?null:Qb?Yb:null,a.src=b,void 0!==a._called_unload&&(a._called_load=!1)),Ib&&(eb=null),b},$=function(a){if(!mb.useHTML5Audio||!mb.hasHTML5)return!1;var c,d,f,g,h=a.url||null,i=a.type||null,j=mb.audioFormats;if(i&&mb.html5[i]!==b)return mb.html5[i]&&!e(i);if(!_){_=[];for(g in j)j.hasOwnProperty(g)&&(_.push(g),j[g].related&&(_=_.concat(j[g].related)));_=new RegExp("\\.("+_.join("|")+")(\\?.*)?$","i")}return f=h?h.toLowerCase().match(_):null,f&&f.length?f=f[1]:i?(d=i.indexOf(";"),f=(-1!==d?i.substr(0,d):i).substr(6)):c=!1,f&&mb.html5[f]!==b?c=mb.html5[f]&&!e(f):(i="audio/"+f,c=mb.html5.canPlayType({type:i}),mb.html5[f]=c,c=c&&mb.html5[i]&&!e(i)),c},cb=function(){function a(a){var b,c,d,e=!1,f=!1;if(!g||"function"!=typeof g.canPlayType)return e;if(a instanceof Array){for(c=0,d=a.length;d>c;c++)(mb.html5[a[c]]||g.canPlayType(a[c]).match(mb.html5Test))&&(f=!0,mb.html5[a[c]]=!0,mb.flash[a[c]]=!!a[c].match(Wb));e=f}else b=g&&"function"==typeof g.canPlayType?g.canPlayType(a):!1,e=!(!b||!b.match(mb.html5Test));return e}if(!mb.useHTML5Audio||!mb.hasHTML5)return mb.html5.usingFlash=!0,Gb=!0,!1;var c,d,e,f,g=Audio!==b?Pb&&opera.version()<10?new Audio(null):new Audio:null,h={};e=mb.audioFormats;for(c in e)if(e.hasOwnProperty(c)&&(d="audio/"+c,h[c]=a(e[c].type),h[d]=h[c],c.match(Wb)?(mb.flash[c]=!0,mb.flash[d]=!0):(mb.flash[c]=!1,mb.flash[d]=!1),e[c]&&e[c].related))for(f=e[c].related.length-1;f>=0;f--)h["audio/"+e[c].related[f]]=h[c],mb.html5[e[c].related[f]]=h[c],mb.flash[e[c].related[f]]=h[c];return h.canPlayType=g?a:null,mb.html5=n(mb.html5,h),mb.html5.usingFlash=Y(),Gb=mb.html5.usingFlash,!0},x={},L=function(){},P=function(a){return 8===l&&a.loops>1&&a.stream&&(a.stream=!1),a},Q=function(a){return a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(a.usePolicyFile=!0),a},R=function(){},i=function(){return!1},I=function(a){var b;for(b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(a[b]=i);b=null},J=function(a){a===b&&(a=!1),(wb||a)&&mb.disable(a)},K=function(a){var b,c=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(c=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return b=(a&&-1!==a.lastIndexOf("/")?a.substr(0,a.lastIndexOf("/")+1):"./")+mb.movieURL,mb.noSWFCache&&(b+="?ts="+(new Date).getTime()),b},v=function(){l=parseInt(mb.flashVersion,10),8!==l&&9!==l&&(mb.flashVersion=l=yb);var a=mb.debugMode||mb.debugFlash?"_debug.swf":".swf";mb.useHTML5Audio&&!mb.html5Only&&mb.audioFormats.mp4.required&&9>l&&(mb.flashVersion=l=9),mb.version=mb.versionNumber+(mb.html5Only?" (HTML5-only mode)":9===l?" (AS3/Flash 9)":" (AS2/Flash 8)"),l>8?(mb.defaultOptions=n(mb.defaultOptions,mb.flash9Options),mb.features.buffering=!0,mb.defaultOptions=n(mb.defaultOptions,mb.movieStarOptions),mb.filePatterns.flash9=new RegExp("\\.(mp3|"+ac.join("|")+")(\\?.*)?$","i"),mb.features.movieStar=!0):mb.features.movieStar=!1,mb.filePattern=mb.filePatterns[8!==l?"flash9":"flash8"],mb.movieURL=(8===l?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),mb.features.peakData=mb.features.waveformData=mb.features.eqData=l>8},G=function(a,b){return ob?(ob._setPolling(a,b),void 0):!1},H=function(){},S=this.getSoundById,N=function(){var a=[];return mb.debugMode&&a.push(O.sm2Debug),mb.debugFlash&&a.push(O.flashDebug),mb.useHighPerformance&&a.push(O.highPerf),a.join(" ")},M=function(){var a=(L("fbHandler"),mb.getMoviePercent()),b=O,c={type:"FLASHBLOCK"};return mb.html5Only?!1:(mb.ok()?mb.oMC&&(mb.oMC.className=[N(),b.swfDefault,b.swfLoaded+(mb.didFlashBlock?" "+b.swfUnblocked:"")].join(" ")):(Gb&&(mb.oMC.className=N()+" "+b.swfDefault+" "+(null===a?b.swfTimedout:b.swfError)),mb.didFlashBlock=!0,r({type:"ontimeout",ignoreInit:!0,error:c}),F(c)),void 0)},q=function(a,c,d){sb[a]===b&&(sb[a]=[]),sb[a].push({method:c,scope:d||null,fired:!1})},r=function(a){if(a||(a={type:mb.ok()?"onready":"ontimeout"}),!vb&&a&&!a.ignoreInit)return!1;if("ontimeout"===a.type&&(mb.ok()||wb&&!a.ignoreInit))return!1;var b,c,d={success:a&&a.ignoreInit?mb.ok():!wb},e=a&&a.type?sb[a.type]||[]:[],f=[],g=[d],h=Gb&&!mb.ok();for(a.error&&(g[0].error=a.error),b=0,c=e.length;c>b;b++)e[b].fired!==!0&&f.push(e[b]);if(f.length)for(b=0,c=f.length;c>b;b++)f[b].scope?f[b].method.apply(f[b].scope,g):f[b].method.apply(this,g),h||(f[b].fired=!0);return!0},s=function(){a.setTimeout(function(){mb.useFlashBlock&&M(),r(),"function"==typeof mb.onload&&mb.onload.apply(a),mb.waitForWindowLoad&&db.add(a,"load",s)},1)},gb=function(){if(fb!==b)return fb;var c,d,e,f=!1,g=navigator,h=g.plugins,i=a.ActiveXObject;if(h&&h.length)d="application/x-shockwave-flash",e=g.mimeTypes,e&&e[d]&&e[d].enabledPlugin&&e[d].enabledPlugin.description&&(f=!0);else if(i!==b&&!pb.match(/MSAppHost/i)){try{c=new i("ShockwaveFlash.ShockwaveFlash")}catch(j){c=null}f=!!c,c=null}return fb=f,f},Y=function(){var a,b,c=mb.audioFormats,d=Kb&&!!pb.match(/os (1|2|3_0|3_1)/i);if(d?(mb.hasHTML5=!1,mb.html5Only=!0,mb.oMC&&(mb.oMC.style.display="none")):mb.useHTML5Audio&&(mb.html5&&mb.html5.canPlayType||(mb.hasHTML5=!1)),mb.useHTML5Audio&&mb.hasHTML5){X=!0;for(b in c)c.hasOwnProperty(b)&&c[b].required&&(mb.html5.canPlayType(c[b].type)?mb.preferFlash&&(mb.flash[b]||mb.flash[c[b].type])&&(a=!0):(X=!1,a=!0))}return mb.ignoreFlash&&(a=!1,X=!0),mb.html5Only=mb.hasHTML5&&mb.useHTML5Audio&&!a,!mb.html5Only},W=function(a){var b,c,d,e=0;if(a instanceof Array){for(b=0,c=a.length;c>b;b++)if(a[b]instanceof Object){if(mb.canPlayMIME(a[b].type)){e=b;break}}else if(mb.canPlayURL(a[b])){e=b;break}a[e].url&&(a[e]=a[e].url),d=a[e]}else d=a;return d},T=function(a){a._hasTimer||(a._hasTimer=!0,!Rb&&mb.html5PollingInterval&&(null===Eb&&0===Db&&(Eb=setInterval(V,mb.html5PollingInterval)),Db++))},U=function(a){a._hasTimer&&(a._hasTimer=!1,!Rb&&mb.html5PollingInterval&&Db--)},V=function(){var a;if(null!==Eb&&!Db)return clearInterval(Eb),Eb=null,!1;for(a=mb.soundIDs.length-1;a>=0;a--)mb.sounds[mb.soundIDs[a]].isHTML5&&mb.sounds[mb.soundIDs[a]]._hasTimer&&mb.sounds[mb.soundIDs[a]]._onTimer()},F=function(c){c=c!==b?c:{},"function"==typeof mb.onerror&&mb.onerror.apply(a,[{type:c.type!==b?c.type:null}]),c.fatal!==b&&c.fatal&&mb.disable()},hb=function(){if(!Sb||!gb())return!1;var a,b,c=mb.audioFormats;for(b in c)if(c.hasOwnProperty(b)&&("mp3"===b||"mp4"===b)&&(mb.html5[b]=!1,c[b]&&c[b].related))for(a=c[b].related.length-1;a>=0;a--)mb.html5[c[b].related[a]]=!1},this._setSandboxType=function(){},this._externalInterfaceOK=function(){return mb.swfLoaded?!1:(mb.swfLoaded=!0,Ub=!1,Sb&&hb(),setTimeout(k,Mb?100:1),void 0)},E=function(a,c){function d(){}function e(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(tb&&ub)return!1;if(mb.html5Only)return v(),d(),mb.oMC=h(mb.movieID),k(),tb=!0,ub=!0,!1;var f,g,i,j,l,m,n,o,p=c||mb.url,q=mb.altURL||p,r="JS/Flash audio component (SoundManager 2)",s=D(),t=N(),u=null,w=rb.getElementsByTagName("html")[0];if(u=w&&w.dir&&w.dir.match(/rtl/i),a=a===b?mb.id:a,v(),mb.url=K(Zb?p:q),c=mb.url,mb.wmode=!mb.wmode&&mb.useHighPerformance?"transparent":mb.wmode,null!==mb.wmode&&(pb.match(/msie 8/i)||!Mb&&!mb.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Fb.push(x.spcWmode),mb.wmode=null),f={name:a,id:a,src:c,quality:"high",allowScriptAccess:mb.allowScriptAccess,bgcolor:mb.bgColor,pluginspage:$b+"www.macromedia.com/go/getflashplayer",title:r,type:"application/x-shockwave-flash",wmode:mb.wmode,hasPriority:"true"},mb.debugFlash&&(f.FlashVars="debug=1"),mb.wmode||delete f.wmode,Mb)g=rb.createElement("div"),j=['<object id="'+a+'" data="'+c+'" type="'+f.type+'" title="'+f.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+$b+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',e("movie",c),e("AllowScriptAccess",mb.allowScriptAccess),e("quality",f.quality),mb.wmode?e("wmode",mb.wmode):"",e("bgcolor",mb.bgColor),e("hasPriority","true"),mb.debugFlash?e("FlashVars",f.FlashVars):"","</object>"].join("");else{g=rb.createElement("embed");for(i in f)f.hasOwnProperty(i)&&g.setAttribute(i,f[i])}if(H(),t=N(),s=D())if(mb.oMC=h(mb.movieID)||rb.createElement("div"),mb.oMC.id)o=mb.oMC.className,mb.oMC.className=(o?o+" ":O.swfDefault)+(t?" "+t:""),mb.oMC.appendChild(g),Mb&&(l=mb.oMC.appendChild(rb.createElement("div")),l.className=O.swfBox,l.innerHTML=j),ub=!0;else{if(mb.oMC.id=mb.movieID,mb.oMC.className=O.swfDefault+" "+t,m=null,l=null,mb.useFlashBlock||(mb.useHighPerformance?m={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(m={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},u&&(m.left=Math.abs(parseInt(m.left,10))+"px"))),Nb&&(mb.oMC.style.zIndex=1e4),!mb.debugFlash)for(n in m)m.hasOwnProperty(n)&&(mb.oMC.style[n]=m[n]);try{Mb||mb.oMC.appendChild(g),s.appendChild(mb.oMC),Mb&&(l=mb.oMC.appendChild(rb.createElement("div")),l.className=O.swfBox,l.innerHTML=j),ub=!0}catch(y){throw new Error(L("domError")+" \n"+y.toString())}}return tb=!0,d(),!0},y=function(){return mb.html5Only?(E(),!1):ob?!1:mb.url?(ob=mb.getMovie(mb.id),ob||(zb?(Mb?mb.oMC.innerHTML=Ab:mb.oMC.appendChild(zb),zb=null,tb=!0):E(mb.id,mb.url),ob=mb.getMovie(mb.id)),"function"==typeof mb.oninitmovie&&setTimeout(mb.oninitmovie,1),!0):!1},t=function(){setTimeout(u,1e3)},u=function(){var b,c=!1;return mb.url?Bb?!1:(Bb=!0,db.remove(a,"load",t),Ub&&!Tb?!1:(vb||(b=mb.getMoviePercent(),b>0&&100>b&&(c=!0)),setTimeout(function(){return b=mb.getMoviePercent(),c?(Bb=!1,a.setTimeout(t,1),!1):(!vb&&Vb&&(null===b?mb.useFlashBlock||0===mb.flashLoadTimeout?mb.useFlashBlock&&M():!mb.useFlashBlock&&X?a.setTimeout(function(){mb.setup({preferFlash:!1}).reboot(),mb.didFlashBlock=!0,mb.beginDelayedInit()},1):r({type:"ontimeout",ignoreInit:!0}):0===mb.flashLoadTimeout||J(!0)),void 0)},mb.flashLoadTimeout),void 0)):!1},w=function(){function b(){db.remove(a,"focus",w)}return Tb||!Ub?(b(),!0):(Vb=!0,Tb=!0,Bb=!1,t(),b(),!0)},kb=function(){},jb=function(){},m=function(b){if(vb)return!1;if(mb.html5Only)return vb=!0,s(),!0;var c,d=mb.useFlashBlock&&mb.flashLoadTimeout&&!mb.getMoviePercent(),e=!0;return d||(vb=!0,wb&&(c={type:!fb&&Gb?"NO_FLASH":"INIT_TIMEOUT"})),(wb||b)&&(mb.useFlashBlock&&mb.oMC&&(mb.oMC.className=N()+" "+(null===mb.getMoviePercent()?O.swfTimedout:O.swfError)),r({type:"ontimeout",error:c,ignoreInit:!0}),F(c),e=!1),wb||(mb.waitForWindowLoad&&!xb?db.add(a,"load",s):s()),e},j=function(){var a,c=mb.setupOptions;for(a in c)c.hasOwnProperty(a)&&(mb[a]===b?mb[a]=c[a]:mb[a]!==c[a]&&(mb.setupOptions[a]=mb[a]))},k=function(){function b(){db.remove(a,"load",mb.beginDelayedInit)}if(vb)return!1;if(mb.html5Only)return vb||(b(),mb.enabled=!0,m()),!0;y();try{ob._externalInterfaceTest(!1),G(!0,mb.flashPollingInterval||(mb.useHighPerformance?10:50)),mb.debugMode||ob._disableDebug(),mb.enabled=!0,mb.html5Only||db.add(a,"unload",i)}catch(c){return F({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),J(!0),m(),!1}return m(),b(),!0},A=function(){return C?!1:(C=!0,j(),H(),!fb&&mb.hasHTML5&&mb.setup({useHTML5Audio:!0,preferFlash:!1}),cb(),!fb&&Gb&&(Fb.push(x.needFlash),mb.setup({flashLoadTimeout:1})),rb.removeEventListener&&rb.removeEventListener("DOMContentLoaded",A,!1),y(),!0)},bb=function(){return"complete"===rb.readyState&&(A(),rb.detachEvent("onreadystatechange",bb)),!0},B=function(){xb=!0,db.remove(a,"load",B)},z=function(){Rb&&(mb.setupOptions.useHTML5Audio=!0,mb.setupOptions.preferFlash=!1,(Kb||Lb&&!pb.match(/android\s2\.3/i))&&(Kb&&(mb.ignoreFlash=!0),Ib=!0))},z(),gb(),db.add(a,"focus",w),db.add(a,"load",t),db.add(a,"load",B),rb.addEventListener?rb.addEventListener("DOMContentLoaded",A,!1):rb.attachEvent?rb.attachEvent("onreadystatechange",bb):F({type:"NO_DOM2_EVENTS",fatal:!0})}var d=null;void 0!==a.SM2_DEFER&&SM2_DEFER||(d=new c),a.SoundManager=c,a.soundManager=d}(window);var br_sm2=function(){function a(a){console.log("setting up sm2 ********"),soundManager.setup(g),soundManager.onready(function(){a()})}function b(a){var b=a.sampleTrack?badracket.utils.stringToTime("0:30"):badracket.utils.stringToTime(br_player.state.currSong.duration),c=a.position,d=br_player.state.isSliding;playbarWidth=(100*(c/b)).toFixed(2)+"%",d||br_player.state.currSong.sm2_obj!==a||(br_player.ui.el.progressBar.css("width",playbarWidth),br_player.ui.el.progressTime.text(badracket.utils.msToTime(c)))}function c(a){console.log("on finish ran"),a.setPosition(0),br_player.ui.handlers.nextPrev("next"),br_mixpanel.track("Song Ended",{songUrl:a.url,duration:badracket.utils.msToTime(a.duration)}),mixpanel.people.increment("Songs finished",1)}function d(a,d){return console.log("create sound ran"),mixpanel.people.increment("Songs started",1),br_mixpanel.track("Song started"),d?soundManager.createSound({id:"brSound"+h++,url:a.songUrl,autoLoad:!0}):soundManager.createSound({id:"brSound"+h++,url:a.songUrl,autoLoad:!0,onplay:function(){br_player.state.isPlaying=!0,$(window).trigger("sm2-play-event")},onresume:function(){br_player.state.isPlaying=!0,$(window).trigger("sm2-play-event")},onpause:function(){br_player.state.isPlaying=!1},onstop:function(){br_player.state.isPlaying=!1},whileplaying:function(){b(this)},onfinish:function(){c(this)}})}function e(){var a=br_player.history.song.lastPlayed();"undefined"!=typeof a&&"sm2_obj"in a&&a.sm2_obj.loaded===!1&&a.sm2_obj.unload()}function f(a,b,c){console.log("play-pause ran"),e(),"sm2_obj"in a||(a.sm2_obj=d(a,c)),0!=a.isSampleTrack||$("html").hasClass("fb-logged-in")?(a.sm2_obj.sampleTrack=!1,br_player.logic.remove30SecondListener(a)):(br_player.logic.attach30SecondListener(a),a.sm2_obj.sampleTrack=!0),br_player.ui.render.sampleState(a),b?a.sm2_obj.pause():a.sm2_obj.togglePause()}var g={url:badracket.utils.envCheck("/brv5-prod/swf","swf","swf"),flashVersion:9,debugMode:!1,flashPollingInterval:125,html5PollingInterval:125,useHighPerformance:!0},h=0;return{setup:a,createSound:d,playPause:f,onFinish:c}}(),br_inline_player=function(){function a(a){var c;return _.each(b,function(b){b.songUrl===a&&(c=b)}),c}var b=[],c={playClick:function(){console.log("inline-play-click-bound"),s.bd.on({click:function(a){d.playClick(a)}},".inline-play-pause")}},d={playClick:function(c){var d=$(c.target).closest(".inline-player"),e=d.data("song-url"),f=a(e),g=d.find(".inline-play-pause");if($(window).trigger("vimeo-play-event",e),f){f.sm2_obj.togglePause();var h=f.sm2_obj.paused?"m":"n";g.attr("data-icon",h)}else{var i={songUrl:e};b.push(i),br_sm2.playPause(i,!1,!0),g.attr("data-icon","n"),$(window).on("sm2-play-event vimeo-play-event",function(a,b){return b===i.songUrl?!1:(i.sm2_obj.pause(),g.attr("data-icon","m"),void 0)})}}};return{bindUI:c}}();br_inline_player.bindUI.playClick();var br_player=function(){var a={isPreviewSong:!1,isSliding:!1,isPlaying:!1,currSong:null,currAlbum:null},b=function(){var b={playerWrapper:$(".audio-player-wrapper"),player:$(".audio-player"),song:$(".audio-player .song"),artist:$(".audio-player .artist"),albumLink:$(".audio-player .view-full-album"),progressBar:$(".audio-player .progress-bar"),progressTime:$(".audio-player .progress-time"),currentTrack:$(".audio-player .current-track"),totalTracks:$(".audio-player .total-tracks"),slider:$(".slider"),playButton:$(".play-pause"),prevButton:$(".previous"),nextButton:$(".next"),ctaWrap:$(".support-band"),ctaButton:$(".support-band-button")},f={play:"m",pause:"n",speaker:"s"},g={init:function(a,c){if(b.player.addClass("ready"),"show"===a.kind){b.artist.html(c.artist);var d=new Date(a.date.split(" ")[0]),e=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1),f=date("M j",e);b.albumLink.find(".show").text("Playing "+f+": ").show(),b.albumLink.find(".target").text("view show"),b.albumLink.find(".track-count").hide(),b.ctaWrap.attr("data-toggle","none"),b.ctaWrap.attr("href",a.albumUrl),b.ctaButton.text("Get Tickets"),b.ctaButton.removeClass("get-album")}else 1==c.isSampleTrack||$("html").hasClass("fb-logged-in")?b.player.removeClass("preview-song"):b.player.addClass("preview-song"),b.albumLink.find(".show").hide(),b.artist.html(a.artist),b.albumLink.find(".track-count").show(),b.albumLink.find(".target").text("View album"),b.ctaWrap.attr("data-toggle","modal"),b.ctaWrap.attr("href","#buy-album-form"),b.ctaButton.text("Get Album"),b.ctaButton.addClass("get-album");
b.song.html(c.songTitle),b.progressBar.css("width","0%"),b.progressTime.html(c.duration),b.albumLink.attr("href",a.albumUrl),b.currentTrack.html(parseInt(c.trackNumber,10)),b.totalTracks.html(a.tracks.length)},playState:function(){var c=a.isPlaying?f.pause:f.play;b.playButton.attr("data-icon",c)},sampleState:function(a){1==a.isSampleTrack||$("html").hasClass("fb-logged-in")?b.player.removeClass("preview-song"):b.player.addClass("preview-song")},updateTime:function(a){b.progressTime.html(a)}},h={playClick:function(){br_player.logic.targetSong(a.currAlbum,a.currSong),g.playState(),br_mixpanel.track("Click: Play / Pause")},albumClick:function(a){var b=$(a.target);if("album-detail"===br_state.viewGet()||b.closest("a").hasClass("link-to-album"))return!1;a.preventDefault(),a.stopPropagation();var e=b.closest(".album").attr("data-album-title"),f=d.getAlbumByName(e),g=d.sampleSong(f);c.targetSong(f,g),br_mixpanel.track("Click: Album",{albumTitle:e})},songClick:function(a){var b=$("[data-album-title]").attr("data-album-title"),e=d.getAlbumByName(b),f=parseInt($(a.target).closest(".song").attr("data-track-number"),10)-1,g=e.tracks[f];c.targetSong(e,g),br_mixpanel.track("Click: Song",{songTitle:g.songTitle})},nextPrev:function(a){var b;"next"===a?(b=e.song.next(),c.targetSong(b[0],b[1])):(previousAlbumSong=e.song.previous(),c.targetSong(previousAlbumSong[0],previousAlbumSong[1])),br_mixpanel.track("Click: Next / Previous")},buyAlbum:function(a){a.preventDefault();var b=br_player.state.currAlbum,c=b.albumName,d=b.zipFile,e="$"+b.price+".00",f=(100*b.price,b.artist),g=b.coverUrl;0===parseInt(b.price,10)?badracket.setupDownloadForm(g,c,f,e,d):badracket.setupPayForm(g,c,f,e,d),br_mixpanel.track("Click: Buy Album")},buyAlbumHover:function(){function a(){console.log("yep"),s.bd.off("hover",".support-band-button")}badracket.loader.require([badracket_theme_path+"/js/prod/payments-min.js"],a())},buyAlbumDetail:function(a){a.preventDefault();var b=$("[data-album-title]").attr("data-album-title"),c=br_player.albumData.getAlbumByName(b),d=c.albumName,e=c.zipFile,f="$"+c.price+".00",g=(100*c.price,c.artist),h=c.coverUrl;console.log(c),0===parseInt(c.price,10)?badracket.setupDownloadForm(h,d,g,f,e):badracket.setupPayForm(h,d,g,f,e),br_mixpanel.track("Click: Buy Album")},whileSliding:function(a,c){b.progressBar.css("width",c.value+"%")},slideStart:function(){a.isSliding=!0,br_mixpanel.track("Drag: Progress bar")},slideStop:function(b,c){a.isSliding=!1;var d;d=0!=br_player.state.currSong.isSampleTrack||$("html").hasClass("fb-logged-in")?c.value/100*badracket.utils.stringToTime(a.currSong.duration):3e4*(c.value/100),a.currSong.sm2_obj.setPosition(d)},rewind:function(){s=br_player.history.song.current(),s.sm2_obj&&s.sm2_obj.setPosition(0)}},i={play:function(){s.bd.on({click:function(){h.playClick()}},".play-pause")},next:function(){s.bd.on({click:function(){h.nextPrev("next")}},".audio-player .next")},previous:function(){s.bd.on({click:function(){h.nextPrev("prev")}},".previous")},album:function(){s.bd.on({click:function(a){h.albumClick(a)}},".album")},song:function(){s.bd.on({click:function(a){h.songClick(a)}},".song")},buyAlbum:function(){s.bd.on({click:function(a){h.buyAlbum(a)}},".get-album")},buyAlbumDetail:function(){s.bd.on({click:function(a){h.buyAlbumDetail(a)}},".buy-album-detail")},buyAlbumHover:function(){s.bd.on({hover:function(a){h.buyAlbumHover(a)}},".support-band-button, .buy-album-detail")},slider:function(){b.slider.slider({step:.01,slide:function(a,b){h.whileSliding(a,b)},start:function(){h.slideStart()},stop:function(a,b){h.slideStop(a,b)}})}};return{el:b,handlers:h,bindui:i,render:g}}(),c=function(){function c(a,b,c){var d=$('.song[data-track-number="'+b.trackNumber+'"]'),e=$('.album[data-album-title="'+a.albumName+'"]'),f=br_state.viewGet();console.log(f),"album-detail"===f||"show-detail"===f?$("[data-album-title]").attr("data-album-title")===a.albumName&&("toggle"===c?d.toggleClass("song-playing"):d.removeClass("song-playing")):"toggle"===c?e.toggleClass("playing"):e.removeClass("playing")}function d(d,f,g){f.songTitle!==a.currSong.songTitle&&("undefined"!=typeof a.currSong.sm2_obj&&a.currSong.sm2_obj.setPosition(0),b.render.init(d,f),c(a.currAlbum,a.currSong,"clear"),a.isPlaying&&a.currSong.sm2_obj.stop(),e.update(d,f)),c(d,f,"toggle"),br_sm2.playPause(f,g),b.render.playState()}function f(a){var b=a.sm2_obj;b.onPosition(26e3,function(){h(b)}),b.onPosition(3e4,function(){br_sm2.onFinish(a.sm2_obj)})}function g(a){var b=a.sm2_obj;b.clearOnPosition(26e3),b.clearOnPosition(3e4)}function h(a){var b=a.volume;return 0===b?(setTimeout(function(){a.setVolume(100)},1e3),!1):(a.setVolume(Math.min(100,b-1)),setTimeout(function(){h(a)},40),void 0)}return{targetSong:d,attach30SecondListener:f,remove30SecondListener:g}}(),d=function(){function a(a){e=e.concat(a),d=e.length}function b(a){for(var b=d;b--;)if(e[b].albumName===a)return e[b]}function c(a){for(var b=a.tracks,c=0;c<b.length;c++)if(1==parseInt(b[c].isSampleTrack,10))return b[c]}var d,e=[];return{getAlbumByName:b,sampleSong:c,set:a,get:function(){return e}}}(),e=function(){function b(a,b){h=d.get().indexOf(a),i=a.tracks.indexOf(b),j.push([h,i]),f(a,b),console.log("updatehistory ran")}function c(){return j}function f(b,c){console.log(a),a.currAlbum=b,a.currSong=c}function g(){return j.length}var h,i,j=[],k=function(){function a(){return d.get()[h]}function b(){return d.get()[h+1]}function c(){return d.get()[h-1]}function e(){var a=br_player.albumData.get();return a[Math.round(Math.random(0,a.length))]}return{current:a,next:b,previous:c,random:e}}(),l=function(){function b(){return d.get()[h].tracks[i]}function c(){l=d.get(),m=l.length,n=a.currAlbum.tracks.length,o=e.album.next(),p=e.album.previous()}function f(){c();var b=i+1;if(b>=n){if(h>=m-1){var d=l[0],e=d.tracks[0];return[d,e]}var f=o.tracks[0];return[o,f]}return nextSong=a.currAlbum.tracks[b],[a.currAlbum,nextSong]}function g(){c();var b=i-1;if(0>b){if(0>=h){var d=l[m-1],e=d.tracks[d.tracks.length-1];return[d,e]}var f=p.tracks[p.tracks.length-1];return[p,f]}return previousSong=a.currAlbum.tracks[b],[a.currAlbum,previousSong]}function k(){var a,b,c=j[j.length-2];return"undefined"!=typeof c?(a=c[0],b=c[1],d.get()[a].tracks[b]):void 0}var l,m,n,o,p;return{current:b,next:f,previous:g,lastPlayed:k}}();return{get:c,update:b,length:g,album:k,song:l}}();return{state:a,ui:b,logic:c,albumData:d,history:e}}();$.subscribe("/view/change",updateView("/view/change"));var init=function(){function a(){console.log("trying to load sm"),"undefined"!=typeof soundManager?br_sm2.setup(b):setTimeout(function(){a()},125)}function b(){console.log("Soundmanager ready"),e.sm=!0,$(window).on("vimeo-play-event",function(){var a=br_player.state.currAlbum,b=br_player.state.currSong;br_player.logic.targetSong(a,b,!0)}),d()}function c(a){console.log("Album data ready"),e[a]=!0,d()}function d(){e.sm&&e.album&&e.show&&(console.log("everything is loaded"),doMoreStuff())}var e={sm:!1,album:!1,show:!1};return{loadSM:a,dataReady:c,readyState:e,init:init}}();init.loadSM();