function bullshit(){$("html").html("");br_facebook.BR.photos=_.sortBy(br_facebook.BR.photos,function(p){return-p.likes});console.log(br_facebook.BR.photos);_.each(br_facebook.BR.photos,function(el){$("html").append('<img style="width:100%;" src="'+el.src+'"/>')})}var br_facebook=function(){function init(){FB.init({appId:"182655285084916",channelUrl:"//WWW.BADRACKET.COM/channel.html",status:true,cookie:true,xfbml:true});FB.getLoginStatus(function(response){if(response.status==="connected"){var r=response.authResponse;user.userID=r.userID;user.token=r.accessToken;populateUser.getUser(user.userID);populateBR.getBaseline();populateBR.getEvents()}})}var state={userAuth:false};var user={token:null,userID:null,firstName:null,lastName:null,bandLikes:[],musicListens:[],loaded:false};var BR={id:null,link:null,likes:null,events:[],loaded:false,photos:[]};var populateBR=function(){function getBaseline(){FB.api("/badracket",function(data){BR.id=data.id;BR.likes=data.likes;BR.link=data.link})}function getEvents(){FB.api("/badracket/events",function(data){BR.events=data.data})}function getPhotos(){var albums;FB.api("/badracket/albums?fields=id&limit=9999",function(data){albums=data.data;console.log(albums);console.log(albums.length);getPhotoURLS(albums)})}function getPhotoURLS(albums){_.each(albums,function(el){FB.api(el.id+"/photos?limit=9999",function(data){var allPhotos=data.data;_.each(allPhotos,function(el){var src=el.images[0].source;var likes=el.likes?el.likes.data.length:0;BR.photos.push({src:src,likes:likes})})})})}return{getBaseline:getBaseline,getEvents:getEvents,getPhotos:getPhotos}}();var populateUser=function(){function getUser(userID){FB.api("/"+userID,function(data){user.first_name=data.first_name;user.last_name=data.last_name;user.loaded=true})}return{getUser:getUser}}();var UI=function(){var handlers={};var bindUI={};return{handers:handlers,bindUI:bindUI}}();return{init:init,user:user,BR:BR,UI:UI,populateBR:populateBR,populateUser:populateUser}}();